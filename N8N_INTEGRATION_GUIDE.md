# üî• N8N Workflow Automation - –ü–æ–ª–Ω–∞—è –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AI Server

## üéØ –û–±–∑–æ—Ä

–≠—Ç–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç N8N –≤ –º–æ—â–Ω—É—é –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—É—é –ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è AI Server workflow'–∞–º–∏. N8N –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üöÄ **–û—Å–Ω–æ–≤–Ω–æ–π –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**
- **–í–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä workflow'–æ–≤** - —Å–æ–∑–¥–∞–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- **–ö–∞—Å—Ç–æ–º–Ω—ã–µ –Ω–æ–¥—ã –¥–ª—è AI Server** - –ø—Ä—è–º–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ –≤—Å–µ–º–∏ API —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º–∏
- **Webhook –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –¥–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —Å–≤—è–∑—å –º–µ–∂–¥—É N8N –∏ AI Server
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è workflow'–æ–≤

### üé® **–î–æ—Å—Ç—É–ø–Ω—ã–µ AI –°–µ—Ä–≤–∏—Å—ã —á–µ—Ä–µ–∑ N8N**
- **Instagram Scraping** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ –ø—Ä–æ—Ñ–∏–ª–µ–π –∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤
- **Neuro Image Generation** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ FLUX, Midjourney
- **Text-to-Video** - —Å–æ–∑–¥–∞–Ω–∏–µ –≤–∏–¥–µ–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- **Speech Generation** - —Å–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏ —á–µ—Ä–µ–∑ ElevenLabs
- **User Management** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –±–∞–ª–∞–Ω—Å–∞–º–∏

### üìä **–ì–æ—Ç–æ–≤—ã–µ Workflow Templates**
- **"–ê–Ω–∞–ª–∏–∑ –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤"** - –ø–∞—Ä—Å–∏–Ω–≥ ‚Üí –∞–Ω–∞–ª–∏–∑ ‚Üí –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
- **"–°–æ–∑–¥–∞–Ω–∏–µ –ö–æ–Ω—Ç–µ–Ω—Ç–∞"** - –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏ ‚Üí –≥–µ–Ω–µ—Ä–∞—Ü–∏—è ‚Üí –¥–æ—Å—Ç–∞–≤–∫–∞
- **"–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –°–∏—Å—Ç–µ–º—ã"** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ ‚Üí —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è ‚Üí –æ—Ç—á–µ—Ç—ã

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. **–ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose**

```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
cd /path/to/your/ai-server

# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª, –¥–æ–±–∞–≤—å—Ç–µ:
# N8N_ADMIN_PASSWORD=your_secure_password

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å—é —Å–∏—Å—Ç–µ–º—É
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps
```

### 2. **–î–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º**

- **N8N Admin Panel**: http://localhost:5678
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: `admin` 
  - –ü–∞—Ä–æ–ª—å: –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `N8N_ADMIN_PASSWORD`
  
- **AI Server API**: http://localhost:3000
- **N8N API Endpoints**: http://localhost:3000/api/n8n/*

### 3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Credentials –≤ N8N**

1. –û—Ç–∫—Ä–æ–π—Ç–µ N8N –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å: http://localhost:5678
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Credentials** ‚Üí **Add Credential**
3. –í—ã–±–µ—Ä–∏—Ç–µ **AI Server API**
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è:
   - **API URL**: `http://app:3000` (–≤–Ω—É—Ç—Ä–∏ Docker —Å–µ—Ç–∏)
   - **API Key**: –≤–∞—à API –∫–ª—é—á
   - **Secret Key**: –≤–∞—à —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á

## üéÆ –ë—ã—Å—Ç—Ä—ã–π –°—Ç–∞—Ä—Ç

### **–®–∞–≥ 1: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
node tests/n8n/test-n8n-integration.js
```

### **–®–∞–≥ 2: –ò–º–ø–æ—Ä—Ç –¢–µ—Å—Ç–æ–≤–æ–≥–æ Workflow'–∞**

1. –û—Ç–∫—Ä–æ–π—Ç–µ N8N: http://localhost:5678
2. –ù–∞–∂–º–∏—Ç–µ **Import from file**
3. –ó–∞–≥—Ä—É–∑–∏—Ç–µ: `n8n/workflows/test-ai-server-integration.json`
4. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ workflow

### **–®–∞–≥ 3: –¢–µ—Å—Ç–æ–≤—ã–π –ó–∞–ø—É—Å–∫**

```bash
# –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π webhook
curl -X POST http://localhost:5678/webhook/test-webhook \\
  -H "Content-Type: application/json" \\
  -d '{"username": "test_user", "prompt": "Beautiful landscape"}'
```

## üîß API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### **N8N Management API**

| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| `GET` | `/api/n8n/health` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ |
| `GET` | `/api/n8n/workflows` | –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö workflow'–æ–≤ |
| `POST` | `/api/n8n/workflows` | –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ workflow'–∞ |
| `PATCH` | `/api/n8n/workflows/:id/toggle` | –ê–∫—Ç–∏–≤–∞—Ü–∏—è/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è |
| `GET` | `/api/n8n/executions/:id` | –°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è |
| `POST` | `/api/n8n/webhook` | –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ N8N |

### **Trigger Workflows**

```bash
# –ó–∞–ø—É—Å–∫ workflow'–∞ –ø–æ –∏–º–µ–Ω–∏
curl -X POST http://localhost:3000/api/n8n/trigger/instagram-analysis \\
  -H "Content-Type: application/json" \\
  -d '{"telegram_id": "123456", "competitors_count": 5}'
```

## üìã –ü—Ä–∏–º–µ—Ä—ã Workflow'–æ–≤

### **1. Instagram Competitor Analysis**

```json
{
  "name": "Instagram Competitor Analysis",
  "trigger": "webhook",
  "nodes": [
    {
      "type": "aiServerApi",
      "operation": "scrapeProfile",
      "parameters": {
        "username": "{{$json.username}}"
      }
    },
    {
      "type": "aiServerApi", 
      "operation": "analyzeCompetitors",
      "parameters": {
        "telegramId": "{{$json.telegram_id}}",
        "competitorsCount": 3
      }
    }
  ]
}
```

### **2. Content Generation Pipeline**

```json
{
  "name": "Content Generation Pipeline",
  "nodes": [
    {
      "type": "aiServerApi",
      "operation": "generateNeuroImage",
      "parameters": {
        "prompt": "{{$json.prompt}}",
        "model": "flux-schnell",
        "aspectRatio": "16:9"
      }
    },
    {
      "type": "aiServerApi",
      "operation": "generateSpeech", 
      "parameters": {
        "text": "{{$json.voice_text}}"
      }
    }
  ]
}
```

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –û—Ç–ª–∞–¥–∫–∞

### **–õ–æ–≥–∏ –∏ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ N8N
docker-compose logs -f n8n-admin

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ AI Server
docker-compose logs -f ai-server

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è workflow'–æ–≤
curl http://localhost:3000/api/n8n/executions/EXECUTION_ID
```

### **–û—Ç–ª–∞–¥–∫–∞ –ü—Ä–æ–±–ª–µ–º**

1. **N8N –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω**:
   ```bash
   docker-compose restart n8n-admin
   ```

2. **–û—à–∏–±–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏**:
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ credentials –≤ N8N
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ API –∫–ª—é—á–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

3. **Workflow –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è**:
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å workflow'–∞ –≤ N8N
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ webhook URL –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω

## üöÄ –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### **–°–æ–∑–¥–∞–Ω–∏–µ –ö–∞—Å—Ç–æ–º–Ω—ã—Ö –ù–æ–¥–æ–≤**

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –≤ `n8n/custom-nodes/nodes/YourNode/YourNode.node.ts`
2. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–¥—É –≤ `n8n/custom-nodes/package.json`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ N8N –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

### **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å External APIs**

```javascript
// –ü—Ä–∏–º–µ—Ä –∫–∞—Å—Ç–æ–º–Ω–æ–π –Ω–æ–¥—ã –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ API
export class CustomApiNode implements INodeType {
  description: INodeTypeDescription = {
    displayName: 'Custom API Node',
    name: 'customApi',
    // ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
  };
}
```

### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –û—Ç—á–µ—Ç—ã**

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ workflow'—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–æ–≤:
- –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —Å–≤–æ–¥–∫–∏ –ø–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞  
- –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã –ø–æ Instagram –∞–Ω–∞–ª–∏—Ç–∏–∫–µ
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

## üéØ Production Deployment

### **–î–ª—è Production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**:
   ```env
   N8N_BASIC_AUTH_PASSWORD=very_secure_password
   N8N_JWT_AUTH_ACTIVE=true
   N8N_ENCRYPTION_KEY=your_encryption_key
   ```

2. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**:
   ```env
   DB_TYPE=postgres  
   DB_POSTGRESDB_HOST=postgres
   DB_POSTGRESDB_DATABASE=n8n
   ```

3. **SSL/HTTPS**:
   ```env
   N8N_PROTOCOL=https
   WEBHOOK_URL=https://your-domain.com
   ```

## üÜò –ü–æ–º–æ—â—å –∏ –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### **–ü–æ–ª–µ–∑–Ω—ã–µ –ö–æ–º–∞–Ω–¥—ã**

```bash
# –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å–∏—Å—Ç–µ–º—ã
docker-compose down && docker-compose up -d

# –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö N8N (–û–°–¢–û–†–û–ñ–ù–û!)
docker volume rm n8n_n8n_data

# –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö workflow'–æ–≤
curl -u admin:password http://localhost:5678/api/v1/workflows > workflows_backup.json
```

### **Troubleshooting**

| –ü—Ä–æ–±–ª–µ–º–∞ | –†–µ—à–µ–Ω–∏–µ |
|----------|---------|
| N8N –Ω–µ —Å—Ç–∞—Ä—Ç—É–µ—Ç | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–æ—Ä—Ç–∞ 5678 |
| Workflow –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç | –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ webhook URL |
| API –æ—à–∏–±–∫–∏ | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ credentials –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å AI Server |
| –ú–µ–¥–ª–µ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ | –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ —Ä–µ—Å—É—Ä—Å—ã Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ |

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

N8N –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –≤–∞—à AI Server –≤ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É —Å –≤–∏–∑—É–∞–ª—å–Ω—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º workflow'–∞–º–∏. –≠—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –æ—Ç –ø—Ä–æ—Å—Ç—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–π –¥–æ —Å–ª–æ–∂–Ω—ã—Ö enterprise workflow'–æ–≤.

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
2. –°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–∏ –ø–µ—Ä–≤—ã–µ workflow'—ã
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
4. –†–∞—Å—à–∏—Ä—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –Ω–æ–¥–∞–º–∏

**–£–¥–∞—á–Ω–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏! üöÄ**