# üöÑ Railway Timeout –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ü–∞—Ä—Å–∏–Ω–≥–∞ Instagram Reels

## üîç –ü—Ä–æ–±–ª–µ–º–∞ —Å Timeout

**–í–æ–ø—Ä–æ—Å**: –ü–æ—á–µ–º—É 20 —Å–µ–∫—É–Ω–¥ timeout –º–∞–ª–æ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Ä–∏–ª—Å–æ–≤?

## ‚è±Ô∏è –¢–∏–ø—ã Timeout –≤ Railway

### 1. **Healthcheck Timeout** (–¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–∞)
```toml
healthcheckTimeout = 300  # 5 –º–∏–Ω—É—Ç - –ú–ê–ö–°–ò–ú–£–ú –∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ Railway
```
- **–ß—Ç–æ —ç—Ç–æ**: –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–∞ –ø—Ä–∏ –¥–µ–ø–ª–æ–µ
- **–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**: –¢–æ–ª—å–∫–æ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- **–ù–ï –≤–ª–∏—è–µ—Ç** –Ω–∞ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å HTTP –∑–∞–ø—Ä–æ—Å–æ–≤

### 2. **HTTP Request Timeout** (–¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤)
- **–õ–∏–º–∏—Ç Railway**: **–ú–ê–ö–°–ò–ú–£–ú 5 –º–∏–Ω—É—Ç (300 —Å–µ–∫—É–Ω–¥)**
- **–ù–ï –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- **–ñ–µ—Å—Ç–∫–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ** –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- **–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ –≤—Å–µ–º** HTTP –∑–∞–ø—Ä–æ—Å–∞–º

### 3. **Database Query Timeout** (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π)
```typescript
queryTimeout: 60000, // 60 —Å–µ–∫—É–Ω–¥ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ SQL –∑–∞–ø—Ä–æ—Å–∞
```

## üö® –ö–ª—é—á–µ–≤–∞—è –ü—Ä–æ–±–ª–µ–º–∞

**Railway HTTP Request Timeout = 5 –º–∏–Ω—É—Ç –ú–ê–ö–°–ò–ú–£–ú**

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:
- ‚ùå –ù–µ–ª—å–∑—è –ø–∞—Ä—Å–∏—Ç—å 100+ —Ä–∏–ª—Å–æ–≤ –≤ –æ–¥–Ω–æ–º HTTP –∑–∞–ø—Ä–æ—Å–µ  
- ‚ùå –ù–µ–ª—å–∑—è —É–≤–µ–ª–∏—á–∏—Ç—å timeout —Å–≤—ã—à–µ 5 –º–∏–Ω—É—Ç
- ‚ùå –õ—é–±–æ–π HTTP –∑–∞–ø—Ä–æ—Å –¥–ª–∏–Ω–Ω–µ–µ 5 –º–∏–Ω—É—Ç = 502/504 –æ—à–∏–±–∫–∞

## ‚úÖ –†–µ—à–µ–Ω–∏—è –¥–ª—è –î–æ–ª–≥–∏—Ö –û–ø–µ—Ä–∞—Ü–∏–π

### 1. **Background Jobs —Å Inngest** (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)
```typescript
// –í–º–µ—Å—Ç–æ –¥–æ–ª–≥–æ–≥–æ HTTP –∑–∞–ø—Ä–æ—Å–∞:
POST /api/parse-reels ‚Üí 5+ –º–∏–Ω—É—Ç = TIMEOUT ‚ùå

// –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ñ–æ–Ω–æ–≤—É—é –∑–∞–¥–∞—á—É:
POST /api/start-parsing ‚Üí –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç ‚úÖ
// Inngest –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤ —Ñ–æ–Ω–µ –±–µ–∑ timeout –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
```

### 2. **Chunked Processing** (–†–∞–∑–±–∏–≤–∫–∞ –Ω–∞ —á–∞—Å—Ç–∏)
```typescript
// –í–º–µ—Å—Ç–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ 100 —Ä–∏–ª—Å–æ–≤:
parseReels(100) // = 8+ –º–∏–Ω—É—Ç = TIMEOUT ‚ùå

// –†–∞–∑–±–∏–≤–∞–µ–º –Ω–∞ —á–∞—Å—Ç–∏:
for (let i = 0; i < 100; i += 10) {
  await parseReels(10) // = 30 —Å–µ–∫ = OK ‚úÖ
}
```

### 3. **Streaming Response** (–ü–æ—Ç–æ–∫–æ–≤–∞—è –ø–µ—Ä–µ–¥–∞—á–∞)
```typescript
// –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
res.write(JSON.stringify({progress: 25, parsed: 25}))
res.write(JSON.stringify({progress: 50, parsed: 50}))
// –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ real-time
```

## üõ† –¢–µ–∫—É—â–∞—è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### Railway.toml
```toml
[deploy]
healthcheckTimeout = 300        # 5 –º–∏–Ω—É—Ç - –º–∞–∫—Å–∏–º—É–º Railway
# HTTP timeout = 5 –º–∏–Ω—É—Ç - –ù–ï –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è

[environments.production.variables]
RAILWAY_HEALTHCHECK_TIMEOUT_SEC = "300"
```

### Instagram Scraper –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```typescript
// Database timeouts (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ):
connectionTimeoutMillis: 30000,  // 30 —Å–µ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
queryTimeout: 60000,            // 60 —Å–µ–∫ SQL –∑–∞–ø—Ä–æ—Å  
acquireTimeoutMillis: 20000,    // 20 —Å–µ–∫ –∏–∑ –ø—É–ª–∞
```

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è Production

### –î–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ Instagram Reels:

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Inngest –¥–ª—è –¥–æ–ª–≥–∏—Ö –∑–∞–¥–∞—á**:
   ```typescript
   // API endpoint –∑–∞–ø—É—Å–∫–∞–µ—Ç –∑–∞–¥–∞—á—É –∏ —Å—Ä–∞–∑—É –æ—Ç–≤–µ—á–∞–µ—Ç
   app.post('/api/parse-instagram', async (req, res) => {
     await inngest.send({
       name: 'instagram/scraper-v2',
       data: { usernames: req.body.usernames }
     })
     
     res.json({ status: 'started', message: 'Parsing in background' })
   })
   ```

2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑ webhooks**:
   ```typescript
   // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ –ø–∞—Ä—Å–∏–Ω–≥–∞
   await inngest.send({
     name: 'parsing/progress',
     data: { progress: 50, total: 100 }
   })
   ```

3. **–†–µ–∑—É–ª—å—Ç–∞—Ç —á–µ—Ä–µ–∑ –æ—Ç–¥–µ–ª—å–Ω—ã–π endpoint**:
   ```typescript
   app.get('/api/parsing-status/:jobId', (req, res) => {
     // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ç–∞—Ç—É—Å –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–∞—Ä—Å–∏–Ω–≥–∞
   })
   ```

## ‚ö° –ò—Ç–æ–≥

- **Healthcheck timeout**: ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω –¥–æ –º–∞–∫—Å–∏–º—É–º–∞ (300 —Å–µ–∫)
- **HTTP request timeout**: ‚ùå –ù–ï –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è (–ª–∏–º–∏—Ç 5 –º–∏–Ω—É—Ç) 
- **–†–µ—à–µ–Ω–∏–µ**: üöÄ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Background Jobs –¥–ª—è –¥–æ–ª–≥–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

**–î–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ 100+ —Ä–∏–ª—Å–æ–≤ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Inngest background jobs!**