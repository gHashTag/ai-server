### Dart AI Task Manager Integration HTTP Tests

### 1. Проверка статуса интеграции
GET http://localhost:4000/api/dart-ai/status
Content-Type: application/json

### 2. Webhook от Dart AI - создание задачи
POST http://localhost:4000/webhooks/dart-ai/tasks
Content-Type: application/json
x-dart-event: task.created
x-dart-delivery: test-delivery-123

{
  "action": "created",
  "task": {
    "id": "dart-task-12345",
    "title": "Реализовать новую функцию авторизации",
    "description": "Необходимо добавить двухфакторную аутентификацию для повышения безопасности",
    "status": "open",
    "project_id": "proj_123",
    "assignee": "developer@example.com",
    "created_at": "2024-01-15T10:30:00Z",
    "updated_at": "2024-01-15T10:30:00Z",
    "metadata": {
      "priority": "high",
      "estimated_hours": 8
    }
  },
  "repository": "gHashTag/ai-server"
}

### 3. Webhook от Dart AI - обновление задачи
POST http://localhost:4000/webhooks/dart-ai/tasks
Content-Type: application/json
x-dart-event: task.updated
x-dart-delivery: test-delivery-124

{
  "action": "updated",
  "task": {
    "id": "dart-task-12345",
    "title": "Реализовать новую функцию авторизации (обновлено)",
    "description": "Необходимо добавить двухфакторную аутентификацию для повышения безопасности. Добавлен детальный план реализации.",
    "status": "in_progress",
    "project_id": "proj_123",
    "assignee": "developer@example.com",
    "github_issue_number": 42,
    "created_at": "2024-01-15T10:30:00Z",
    "updated_at": "2024-01-15T14:20:00Z",
    "metadata": {
      "priority": "high",
      "estimated_hours": 12,
      "progress": 30
    }
  },
  "repository": "gHashTag/ai-server"
}

### 4. Webhook от Dart AI - завершение задачи
POST http://localhost:4000/webhooks/dart-ai/tasks
Content-Type: application/json
x-dart-event: task.completed
x-dart-delivery: test-delivery-125

{
  "action": "completed",
  "task": {
    "id": "dart-task-12345",
    "title": "Реализовать новую функцию авторизации",
    "description": "Двухфакторная аутентификация успешно реализована и протестирована",
    "status": "completed",
    "project_id": "proj_123",
    "assignee": "developer@example.com",
    "github_issue_number": 42,
    "created_at": "2024-01-15T10:30:00Z",
    "updated_at": "2024-01-16T16:45:00Z",
    "metadata": {
      "priority": "high",
      "actual_hours": 10,
      "completion_rate": 100
    }
  },
  "repository": "gHashTag/ai-server"
}

### 5. Webhook от GitHub Issues - создание issue
POST http://localhost:4000/webhooks/github/issues
Content-Type: application/json
x-github-event: issues
x-github-delivery: github-delivery-456

{
  "action": "opened",
  "issue": {
    "number": 123,
    "title": "Исправить баг в системе уведомлений",
    "body": "При отправке уведомлений пользователям иногда возникает ошибка timeout. Необходимо исследовать и исправить.",
    "state": "open",
    "assignees": [
      {
        "login": "developer1"
      }
    ],
    "labels": [
      {
        "name": "bug"
      },
      {
        "name": "high-priority"
      }
    ],
    "created_at": "2024-01-15T12:00:00Z",
    "updated_at": "2024-01-15T12:00:00Z"
  },
  "repository": {
    "full_name": "gHashTag/ai-server"
  }
}

### 6. Webhook от GitHub Issues - закрытие issue
POST http://localhost:4000/webhooks/github/issues
Content-Type: application/json
x-github-event: issues
x-github-delivery: github-delivery-457

{
  "action": "closed",
  "issue": {
    "number": 123,
    "title": "Исправить баг в системе уведомлений",
    "body": "Баг исправлен в коммите abc123. Добавлены дополнительные проверки timeout.",
    "state": "closed",
    "assignees": [
      {
        "login": "developer1"
      }
    ],
    "labels": [
      {
        "name": "bug"
      },
      {
        "name": "fixed"
      }
    ],
    "created_at": "2024-01-15T12:00:00Z",
    "updated_at": "2024-01-16T09:30:00Z"
  },
  "repository": {
    "full_name": "gHashTag/ai-server"
  }
}

### 7. Ручная синхронизация GitHub Issue в Dart AI
POST http://localhost:4000/api/dart-ai/sync/github-issue
Content-Type: application/json

{
  "issue_number": 1,
  "repository": "gHashTag/ai-server"
}

### 8. Ручная синхронизация задачи Dart AI в GitHub Issue
POST http://localhost:4000/api/dart-ai/sync/task
Content-Type: application/json

{
  "task_id": "dart-task-67890",
  "repository": "gHashTag/ai-server"
}

### 9. Массовая синхронизация открытых GitHub Issues
POST http://localhost:4000/api/dart-ai/sync/bulk-issues
Content-Type: application/json

{
  "repository": "gHashTag/ai-server",
  "state": "open",
  "limit": 10
}

### 10. Массовая синхронизация закрытых GitHub Issues
POST http://localhost:4000/api/dart-ai/sync/bulk-issues
Content-Type: application/json

{
  "repository": "gHashTag/ai-server",
  "state": "closed",
  "limit": 5
}

### 11. Тест с неверными параметрами
POST http://localhost:4000/api/dart-ai/sync/github-issue
Content-Type: application/json

{
  "repository": "gHashTag/ai-server"
}

### 12. Тест с несуществующим issue
POST http://localhost:4000/api/dart-ai/sync/github-issue
Content-Type: application/json

{
  "issue_number": 99999,
  "repository": "gHashTag/ai-server"
}

### 13. Тест health check
GET http://localhost:4000/api/dart-ai/status
Content-Type: application/json

### Variables для удобного тестирования
# @baseUrl = http://localhost:4000
# @repository = gHashTag/ai-server
# @testTaskId = dart-task-test-123
# @testIssueNumber = 1