# üé¨ VEO3 Inngest Integration - –ó–ê–í–ï–†–®–ï–ù–û

## ‚úÖ **–°–¢–ê–¢–£–°: –ü–û–õ–ù–û–°–¢–¨–Æ –ì–û–¢–û–í–û**

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 21 –∞–≤–≥—É—Å—Ç–∞ 2025  
**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 14:45 UTC  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** üéâ **–£–°–ü–ï–®–ù–û –ò–ù–¢–ï–ì–†–ò–†–û–í–ê–ù–û**

---

## üèÜ **–ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ**

### ‚úÖ **1. Inngest —Ñ—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞**
**–§–∞–π–ª:** `src/inngest-functions/generateVeo3Video.ts`
- ‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ (9:16, 16:9, 1:1)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å KieAiService –∏ fallback –Ω–∞ VertexVeoService  
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ‚úÖ Comprehensive error handling
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### ‚úÖ **2. API –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ**
**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤:**
- ‚úÖ **9:16 —Ñ–æ—Ä–º–∞—Ç –†–ê–ë–û–¢–ê–ï–¢** (Task ID: `9e5696f46634b928d5f5b867316f927b`)
- ‚úÖ **Kie.ai API –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã** (HTTP 200)
- ‚úÖ **–í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è**

### ‚úÖ **3. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞**

#### **–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:**
- ‚úÖ `VEO3_CLIENT_FRONTEND_GUIDE.md` - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- ‚úÖ `VEO3_CLIENT_TECHNICAL_SPECIFICATION.md` - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ
- ‚úÖ `test-veo3-all-formats.js` - —Å–∫—Ä–∏–ø—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤

#### **–ì–æ—Ç–æ–≤—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞:**
- ‚úÖ JavaScript/React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- ‚úÖ TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã  
- ‚úÖ API integration –ø—Ä–∏–º–µ—Ä—ã
- ‚úÖ Error handling —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

### ‚úÖ **4. Inngest —Ñ—É–Ω–∫—Ü–∏—è –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∞**
**–§–∞–π–ª:** `src/inngest-functions/index.ts`
- ‚úÖ –ò–º–ø–æ—Ä—Ç –¥–æ–±–∞–≤–ª–µ–Ω
- ‚úÖ –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –º–∞—Å—Å–∏–≤ functions
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã

---

## üéØ **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**

### **üì° API Endpoints –≥–æ—Ç–æ–≤—ã:**
```
‚úÖ POST /api/inngest - –æ—Å–Ω–æ–≤–Ω–æ–π endpoint –¥–ª—è Inngest —Å–æ–±—ã—Ç–∏–π
‚úÖ –°–æ–±—ã—Ç–∏–µ: veo3/video.generate 
‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: 9:16, 16:9, 1:1
‚úÖ –ú–æ–¥–µ–ª–∏: veo3_fast, veo3, runway-aleph
```

### **üîß –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
```
Frontend Request 
    ‚Üì
POST /api/inngest (event: veo3/video.generate)
    ‚Üì  
generateVeo3Video Inngest Function
    ‚Üì
KieAiService (primary) ‚Üí VertexVeoService (fallback)
    ‚Üì
Video Generation & User Notification
    ‚Üì
Result delivered via Telegram Bot
```

### **üí∞ Cost Optimization:**
- ‚úÖ **Kie.ai primary:** $0.05/—Å–µ–∫ (—ç–∫–æ–Ω–æ–º–∏—è 87%)
- ‚úÖ **Vertex AI fallback:** $0.40/—Å–µ–∫  
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ** –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Kie.ai
- ‚úÖ **Balance management** –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω

---

## üìã **–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ**

### **üéØ –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**

#### **1. –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:**
```javascript
// –û—Å–Ω–æ–≤–Ω–æ–π API call
const response = await fetch('/api/inngest', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    name: 'veo3/video.generate',
    data: {
      prompt: 'Beautiful sunset over ocean waves, vertical shot',
      model: 'veo3_fast',
      aspectRatio: '9:16', // –ö–†–ò–¢–ò–ß–ù–û –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ
      duration: 3,
      telegram_id: 'user_id',
      username: 'user_name', 
      is_ru: false,
      bot_name: 'client_bot'
    }
  })
});
```

#### **2. UI —ç–ª–µ–º–µ–Ω—Ç—ã:**
- [ ] **Prompt input** - –ø–æ–ª–µ –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è –≤–∏–¥–µ–æ
- [ ] **Format selector** - –≤—ã–±–æ—Ä 9:16/16:9/1:1  
- [ ] **Model selector** - veo3_fast/veo3
- [ ] **Duration slider** - 2-10 —Å–µ–∫—É–Ω–¥
- [ ] **Generate button** - –∑–∞–ø—É—Å–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- [ ] **Progress indicator** - –ø–æ–∫–∞–∑ –ø—Ä–æ—Ü–µ—Å—Å–∞
- [ ] **Result display** - –≥–æ—Ç–æ–≤–æ–µ –≤–∏–¥–µ–æ

#### **3. Error handling:**
- [ ] **API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω** - –ø–æ–∫–∞–∑ —Å–æ–æ–±—â–µ–Ω–∏—è
- [ ] **–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫—Ä–µ–¥–∏—Ç–æ–≤** - –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è  
- [ ] **–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç** - –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–æ–∂–¥–∞—Ç—å
- [ ] **–°–µ—Ç–µ–≤–∞—è –æ—à–∏–±–∫–∞** - –∫–Ω–æ–ø–∫–∞ –ø–æ–≤—Ç–æ—Ä–∞

### **üì± –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã:**
1. üö® **–ö–†–ò–¢–ò–ß–ù–û:** 9:16 —Ñ–æ—Ä–º–∞—Ç (TikTok/Instagram Stories)
2. üü° **–í–ê–ñ–ù–û:** 16:9 —Ñ–æ—Ä–º–∞—Ç (YouTube)
3. üü¢ **–ñ–ï–õ–ê–¢–ï–õ–¨–ù–û:** 1:1 —Ñ–æ—Ä–º–∞—Ç (Instagram Feed)

---

## üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**

### **‚úÖ Backend —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ API
curl http://localhost:4000/health

# –¢–µ—Å—Ç –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–≥–æ –≤–∏–¥–µ–æ
curl -X POST http://localhost:4000/api/inngest \
  -H "Content-Type: application/json" \
  -d '{
    "name": "veo3/video.generate", 
    "data": {
      "prompt": "Test vertical video",
      "aspectRatio": "9:16",
      "model": "veo3_fast",
      "duration": 3,
      "telegram_id": "test_user"
    }
  }'
```

### **üìã Frontend —Ç–µ—Å—Ç—ã (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ):**
```javascript
// test-veo3-frontend-integration.js
describe('VEO3 Frontend', () => {
  test('should generate 9:16 video', async () => {
    const result = await generateVeo3Video({
      prompt: 'Test video',
      aspectRatio: '9:16',
      model: 'veo3_fast'
    });
    expect(result.success).toBe(true);
  });
});
```

---

## üéâ **–ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**

### **üèÅ –ß—Ç–æ –ø–æ–ª—É—á–∏–ª–∏:**
1. ‚úÖ **–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∞—è Inngest —Ñ—É–Ω–∫—Ü–∏—è** –¥–ª—è VEO3 –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
2. ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤** (9:16, 16:9, 1:1)  
3. ‚úÖ **–≠–∫–æ–Ω–æ–º–∏—è –¥–æ 87%** —á–µ—Ä–µ–∑ Kie.ai API
4. ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback** –Ω–∞ Vertex AI
5. ‚úÖ **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∫–æ–º–∞–Ω–¥—ã
6. ‚úÖ **–ì–æ—Ç–æ–≤—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞** –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
7. ‚úÖ **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ** —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏

### **üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. **Frontend –∫–æ–º–∞–Ω–¥–∞** —Ä–µ–∞–ª–∏–∑—É–µ—Ç UI –∏—Å–ø–æ–ª—å–∑—É—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
2. **QA –∫–æ–º–∞–Ω–¥–∞** —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é  
3. **DevOps** –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã
4. **Product** –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### **üìä –û–∂–∏–¥–∞–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
- **Success Rate:** 95%+ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ 9:16
- **Cost Savings:** 87% —ç–∫–æ–Ω–æ–º–∏–∏ —á–µ—Ä–µ–∑ Kie.ai
- **Generation Time:** 30-120 —Å–µ–∫—É–Ω–¥
- **Fallback Rate:** < 5% –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π –Ω–∞ Vertex AI

---

## üìû **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã**

### **üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- `VEO3_CLIENT_FRONTEND_GUIDE.md` - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- `VEO3_CLIENT_TECHNICAL_SPECIFICATION.md` - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ
- `src/inngest-functions/generateVeo3Video.ts` - –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥

### **üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- `test-veo3-all-formats.js` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
- `test-veo3-integration-final.js` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

### **üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:**
- **API Endpoint:** `/api/inngest`
- **Event Name:** `veo3/video.generate`
- **Health Check:** `/health`
- **Logs:** Console/File logs —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

---

## üèÜ **–ó–∞–∫–ª—é—á–µ–Ω–∏–µ**

**üéØ –ó–ê–î–ê–ß–ê –í–´–ü–û–õ–ù–ï–ù–ê –ü–û–õ–ù–û–°–¢–¨–Æ:**

‚úÖ **Inngest —Ñ—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞** –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞  
‚úÖ **API –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ** –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç  
‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞** –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏  
‚úÖ **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–æ** —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏  

**üöÄ –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –ø–µ—Ä–µ–¥–∞—á–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∫–æ–º–∞–Ω–¥–µ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ UI!**

---

*–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω: 21 –∞–≤–≥—É—Å—Ç–∞ 2025, 14:45 UTC*  
*–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å: AI Assistant (Claude)*  
*–°—Ç–∞—Ç—É—Å: ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û –£–°–ü–ï–®–ù–û*