# üö® –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ Instagram –∞–Ω–∞–ª–∏–∑–∞ –≤ Telegram

## üîç **–ü–†–û–ë–õ–ï–ú–ê:**
**–§—É–Ω–∫—Ü–∏—è `instagramScraperV2` —Å–æ–∑–¥–∞–≤–∞–ª–∞ –æ—Ç—á–µ—Ç—ã, –Ω–æ –ù–ï –û–¢–ü–†–ê–í–õ–Ø–õ–ê –∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é!**

### **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ:**
- ‚úÖ –§—É–Ω–∫—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–ª–∞—Å—å —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –°–æ–∑–¥–∞–≤–∞–ª–∏—Å—å HTML –æ—Ç—á–µ—Ç—ã, Excel —Ñ–∞–π–ª—ã –∏ ZIP –∞—Ä—Ö–∏–≤—ã
- ‚ùå **–û–¢–°–£–¢–°–¢–í–û–í–ê–õ Step –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ Telegram**
- ‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ù–ï –ø–æ–ª—É—á–∞–ª —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –æ—Ç—á–µ—Ç—ã

### **–†–µ–∑—É–ª—å—Ç–∞—Ç –≤ JSON –ø–æ–∫–∞–∑—ã–≤–∞–ª:**
```json
{
  "success": true,
  "htmlReportPath": "output/instagram_analysis_neuro_sage_1753208062668.html",
  "excelReportPath": "output/instagram_data_neuro_sage_1753208062685.xlsx", 
  "archivePath": "output/instagram_competitors_neuro_sage_1753208062702.zip",
  "archiveFileName": "instagram_competitors_neuro_sage_1753208062702.zip"
}
```

**–ù–û –∞—Ä—Ö–∏–≤ –ù–ï –ø—Ä–∏—Ö–æ–¥–∏–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é!**

---

## ‚úÖ **–†–ï–®–ï–ù–ò–ï:**

### **–î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π Step 8: `send-results-to-telegram`**

–í —Ñ—É–Ω–∫—Ü–∏–∏ `src/inngest-functions/instagramScraperV2.ts` –¥–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π —à–∞–≥:

```typescript
// Step 8: Send results to user via Telegram
const telegramResult = await step.run(
  'send-results-to-telegram',
  async () => {
    // –ü—Ä–æ–≤–µ—Ä–∫–∏ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –∞—Ä—Ö–∏–≤–∞
    const bot_name = eventData.bot_name || 'neuro_blogger_bot'
    const { getBotByName } = await import('@/core/bot')
    const botResult = getBotByName(bot_name)
    
    if (reportResult.success && reportResult.archivePath) {
      // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º ZIP –∞—Ä—Ö–∏–≤ —Å –∫—Ä–∞—Å–∏–≤—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
      await bot.telegram.sendDocument(
        requester_telegram_id.toString(),
        { source: fs.createReadStream(reportResult.archivePath) },
        { 
          caption: message, // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–Ω–∞–ª–∏–∑–∞
          parse_mode: 'Markdown'
        }
      )
    }
  }
)
```

### **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–æ–±–∞–≤–ª–µ–Ω–Ω–æ–≥–æ Step'–∞:**

1. **üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö:**
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ `requester_telegram_id`
   - –ü–æ–ª—É—á–∞–µ—Ç `bot_name` –∏–∑ —Å–æ–±—ã—Ç–∏—è –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π

2. **ü§ñ –ü–æ–ª—É—á–µ–Ω–∏–µ –±–æ—Ç–∞:**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `getBotByName()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –±–æ—Ç–∞
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ –µ—Å–ª–∏ –±–æ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω

3. **üì¶ –û—Ç–ø—Ä–∞–≤–∫–∞ –∞—Ä—Ö–∏–≤–∞:**
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –∞—Ä—Ö–∏–≤–∞
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç ZIP –∞—Ä—Ö–∏–≤ —á–µ—Ä–µ–∑ `bot.telegram.sendDocument()`
   - –î–æ–±–∞–≤–ª—è–µ—Ç –∫—Ä–∞—Å–∏–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π

4. **üåê –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å:**
   - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä—É—Å—Å–∫–∏–π –∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫–∏
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `eventData.language` –¥–ª—è –≤—ã–±–æ—Ä–∞ —è–∑—ã–∫–∞

5. **üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏:**
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–∏–ª—Å–æ–≤
   - –û–ø–∏—Å–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∞—Ä—Ö–∏–≤–∞

### **–ü—Ä–∏–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:**
```markdown
üéØ –ê–Ω–∞–ª–∏–∑ Instagram –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω!

üìä **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
‚Ä¢ –ù–∞–π–¥–µ–Ω–æ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤: 10
‚Ä¢ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ –±–∞–∑—É: 10
‚Ä¢ –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Ä–∏–ª—Å–æ–≤: 50

üì¶ **–í –∞—Ä—Ö–∏–≤–µ:**
‚Ä¢ HTML –æ—Ç—á—ë—Ç —Å –∫—Ä–∞—Å–∏–≤–æ–π –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π
‚Ä¢ Excel —Ñ–∞–π–ª —Å –¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
‚Ä¢ README —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏

–¶–µ–ª–µ–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç: @neuro_sage
```

---

## üß™ **–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï:**

### **–°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç:** `test-fix-telegram-delivery.js`

```bash
node test-fix-telegram-delivery.js
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–µ—Å—Ç–∞:**
- Target: `neuro_sage`
- Max competitors: 3 (–¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∞)
- Telegram ID: `144022504`
- Bot: `neuro_blogger_bot`
- Language: `ru`

### **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
1. ‚úÖ –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–µ—Ç –æ—Ç—á–µ—Ç—ã
2. ‚úÖ –°–æ–∑–¥–∞–µ—Ç—Å—è ZIP –∞—Ä—Ö–∏–≤
3. üÜï **–ê–†–•–ò–í –û–¢–ü–†–ê–í–õ–Ø–ï–¢–°–Ø –í TELEGRAM!**
4. ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —Ñ–∞–π–ª —Å –æ—Ç—á–µ—Ç–∞–º–∏

---

## üìã **–§–ê–ô–õ–´ –ò–ó–ú–ï–ù–ï–ù–´:**

### **1. `src/inngest-functions/instagramScraper-v2.ts`**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω Step 8: `send-results-to-telegram`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∞—Ä—Ö–∏–≤–∞ —á–µ—Ä–µ–∑ `bot.telegram.sendDocument()`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ fallback —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è `telegram` –≤ `finalResult`

### **2. `test-fix-telegram-delivery.js`** (–Ω–æ–≤—ã–π —Ñ–∞–π–ª)
- ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏–µ —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –ø—Ä–æ–≤–µ—Ä–∫–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

---

## üéØ **–†–ï–ó–£–õ–¨–¢–ê–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:**

### **–î–û –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚ùå –û—Ç—á–µ—Ç—ã —Å–æ–∑–¥–∞–≤–∞–ª–∏—Å—å, –Ω–æ –ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏—Å—å
- ‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ù–ï –ø–æ–ª—É—á–∞–ª —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞
- ‚ùå –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –æ—Å—Ç–∞–≤–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### **–ü–û–°–õ–ï –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚úÖ –û—Ç—á–µ—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –ò –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç ZIP –∞—Ä—Ö–∏–≤ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
- ‚úÖ –í –∞—Ä—Ö–∏–≤–µ HTML –æ—Ç—á–µ—Ç, Excel —Ñ–∞–π–ª –∏ README
- ‚úÖ –ö—Ä–∞—Å–∏–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –∞–Ω–∞–ª–∏–∑–∞
- ‚úÖ –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ (RU/EN)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ fallback —Å—Ü–µ–Ω–∞—Ä–∏–∏

---

## üîç **–ü–†–û–í–ï–†–ö–ê –†–ï–ó–£–õ–¨–¢–ê–¢–ê:**

### **1. –í Telegram:**
- üì± –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å `144022504` –¥–æ–ª–∂–µ–Ω –ø–æ–ª—É—á–∏—Ç—å ZIP –∞—Ä—Ö–∏–≤
- üìÑ –ê—Ä—Ö–∏–≤ —Å–æ–¥–µ—Ä–∂–∏—Ç HTML, Excel –∏ README —Ñ–∞–π–ª—ã
- üìä –°–æ–æ–±—â–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∞–Ω–∞–ª–∏–∑–∞

### **2. –í Inngest Dashboard:**
- üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ Step 8: `send-results-to-telegram`
- ‚úÖ –°—Ç–∞—Ç—É—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `Completed`
- üìã –í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å: "‚úÖ –ê—Ä—Ö–∏–≤ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —É—Å–ø–µ—à–Ω–æ"

### **3. –í —Ñ–∏–Ω–∞–ª—å–Ω–æ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ:**
```json
{
  "telegram": {
    "sent": true,
    "bot_name": "neuro_blogger_bot", 
    "archive_sent": true,
    "telegram_id": "144022504"
  }
}
```

---

## üéâ **–ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï:**

**–ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞!** 

–§—É–Ω–∫—Ü–∏—è `instagramScraperV2` —Ç–µ–ø–µ—Ä—å:
1. ‚úÖ –°–æ–∑–¥–∞–µ—Ç –æ—Ç—á–µ—Ç—ã (–∫–∞–∫ —Ä–∞–Ω—å—à–µ)
2. üÜï **–û–¢–ü–†–ê–í–õ–Ø–ï–¢ –∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤ Telegram**
3. ‚úÖ –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
4. ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ gracefully

**Telegram –±–æ—Ç —Ç–µ–ø–µ—Ä—å –±—É–¥–µ—Ç –¥–æ—Å—Ç–∞–≤–ª—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º!** üöÄ 