## –¢–µ–∫—É—â–∏–µ –ó–∞–¥–∞—á–∏ (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ) üéØ

*   [‚úÖ] **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä—è–º–æ–π –≤—ã–∑–æ–≤ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –º–æ–¥–µ–ª–∏ (–±–µ–∑ Inngest)** üõ†Ô∏è
    *   –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —Ñ–∞–π–ª `src/services/generateModelTraining.ts` –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ Git.
    *   –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø—Ä—è–º–æ–π –≤—ã–∑–æ–≤ `generateModelTraining` –∏–∑ `src/controllers/generation.controller.ts`.
    *   –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –ü–ª–∞–Ω –ê (Inngest) / –ü–ª–∞–Ω –ë (–ø—Ä—è–º–æ–π –≤—ã–∑–æ–≤) —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.
    *   –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ (–∏–º–ø–æ—Ä—Ç—ã, –∏–º–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü, —Å–∏–≥–Ω–∞—Ç—É—Ä—ã —Ñ—É–Ω–∫—Ü–∏–π) –≤ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–º –∫–æ–¥–µ.
*   [‚è≥] **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ Replicate API (401 Unauthorized)** üîë
    *   *–°—Ç–∞—Ç—É—Å:* –û–∂–∏–¥–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥—Ä—É–≥–∏—Ö –æ—à–∏–±–æ–∫.
    *   –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ `REPLICATE_API_TOKEN` –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (–≤–µ—Ä–æ—è—Ç–Ω–æ, –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –ø–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä—è–º–æ–≥–æ –≤—ã–∑–æ–≤–∞).
*   [‚úÖ] **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É —Ä–∞—Å—á–µ—Ç–∞ –±–∞–ª–∞–Ω—Å–∞ (`–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –±–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è`)** ‚öñÔ∏è
    *   *–ü—Ä–∏—á–∏–Ω–∞:* –û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ RPC `get_user_balance` –∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ –≤ –≤—ã–∑—ã–≤–∞—é—â–µ–º –∫–æ–¥–µ.
    *   –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è `src/core/supabase/getUserBalance.ts` (—Å –∫—ç—à–µ–º, RPC, `invalidateBalanceCache`).
    *   –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ `src/price/helpers/processBalanceVideoOperation.ts` (–ª–æ–≤–∏–º –æ—à–∏–±–∫—É, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º `success: false`).
    *   –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ –≤ `README.md`.
*   [‚è≥] **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ Telegram (`TelegramError: 401: Unauthorized`)** ü§ñ
    *   *–°—Ç–∞—Ç—É—Å:* –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞ –≤ `.env`.
    *   *–ü—Ä–∏—á–∏–Ω–∞:* –ù–µ–≤–µ—Ä–Ω—ã–π –∏–ª–∏ –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω Telegram –±–æ—Ç–∞.
    *   –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ –≤ `README.md`.
    *   *–î–µ–π—Å—Ç–≤–∏–µ:* –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –æ–±–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `TELEGRAM_BOT_TOKEN_AI_KOSHEY_BOT`) –≤ `.env`.
*   [‚úÖ] **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—é –∫—ç—à–∞ –±–∞–ª–∞–Ω—Å–∞** üíæ
    *   –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç –∏ –≤—ã–∑–æ–≤ `invalidateBalanceCache` –≤ `src/core/supabase/updateUserBalanceRobokassa.ts`.
*   [‚úÖ] **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø—Ä–∏ –æ–ø–ª–∞—Ç–µ Robokassa** üîî
    *   *–ü—Ä–∏—á–∏–Ω–∞:* –§—É–Ω–∫—Ü–∏—è `sendPaymentNotification` –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –≤ –≥—Ä—É–ø–ø—É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤.
    *   *–î–µ–π—Å—Ç–≤–∏–µ:* –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä—è–º–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤ `src/services/payment.service.ts` –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –≥—Ä—É–ø–ø—É.
*   [ ] **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ (`Unsupported service: haiper`)** üÜï
    *   *–°—Ç–∞—Ç—É—Å:* –û–∂–∏–¥–∞–µ—Ç —É—Ç–æ—á–Ω–µ–Ω–∏—è –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    *   *–ü—Ä–∏—á–∏–Ω–∞:* –§—É–Ω–∫—Ü–∏—è `generateImageToVideo` –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –º–æ–¥–µ–ª—å `haiper`.
    *   *–î–µ–π—Å—Ç–≤–∏–µ:* –£—Ç–æ—á–Ω–∏—Ç—å, –¥–æ–ª–∂–Ω–∞ –ª–∏ –º–æ–¥–µ–ª—å `haiper` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è. –ï—Å–ª–∏ –¥–∞, –æ–±–Ω–æ–≤–∏—Ç—å `generateImageToVideo.ts`.
*   [ ] **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ `processPayment`** üß™
    *   –°–æ–∑–¥–∞—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–ª—É—á–∞–∏ –¥–ª—è `processPayment`.
    *   –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã (`pnpm test:watch paymentProcessing.test`) –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏.
    *   –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫ –∏ –æ–±—ã—á–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.
*   [ ] **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ `processPayment`** ‚ú®
    *   –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —É–ø—Ä–æ—â–µ–Ω–∏—è –∏ —É–ª—É—á—à–µ–Ω–∏—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ –∫–æ–¥–∞.
*   [ ] **–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ** üöÄ
    *   –í—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–ø–ª–æ–π –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫ –∏ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

## –ó–∞–¥–∞—á–∏ –≤ –û–∂–∏–¥–∞–Ω–∏–∏ / –ë—É–¥—É—â–∏–µ –ò–¥–µ–∏ üí°

*   [ ] **–ü–µ—Ä–µ–≤–Ω–µ–¥—Ä–∏—Ç—å Inngest –¥–ª—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –º–æ–¥–µ–ª–∏ (–ü–ª–∞–Ω –ë)** üßò‚Äç‚ôÇÔ∏è
    *   –ü–æ—Å–ª–µ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞, –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –≤–µ—Ä–Ω—É—Ç—å Inngest –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏.
*   [ ] –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ–ø–ª–∞—Ç—ã.
*   [ ] –†–∞—Å—à–∏—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–æ–¥–ø–∏—Å–æ–∫. 