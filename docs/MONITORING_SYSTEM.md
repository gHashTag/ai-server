# üìä –°–∏—Å—Ç–µ–º–∞ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –õ–æ–≥–æ–≤ –∏ –û—à–∏–±–æ–∫

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–∫—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞.

## üöÄ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –°–∏—Å—Ç–µ–º—ã

### 1. **Log Monitor** (`logMonitor`)
- **–ó–∞–ø—É—Å–∫**: –ö–∞–∂–¥—ã–µ 24 —á–∞—Å–∞ (–≤ 13:00 MSK)
- **–§—É–Ω–∫—Ü–∏—è**: –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å—É—Ç–∫–∏ —Å –ø–æ–º–æ—â—å—é AI
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞ –≤ Telegram –≥—Ä—É–ø–ø—É

### 2. **Critical Error Monitor** (`criticalErrorMonitor`)
- **–ó–∞–ø—É—Å–∫**: –ü–æ —Å–æ–±—ã—Ç–∏—é –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –æ—à–∏–±–∫–∏
- **–§—É–Ω–∫—Ü–∏—è**: –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–∞—Ö
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: –ù–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ –≥—Ä—É–ø–ø—É –∏ –∞–¥–º–∏–Ω—É (–¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö)

### 3. **Health Check** (`healthCheck`)
- **–ó–∞–ø—É—Å–∫**: –ö–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
- **–§—É–Ω–∫—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: –¢–æ–ª—å–∫–æ –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º

## üì± –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram

### –ë–æ—Ç
- **–¢–æ–∫–µ–Ω**: `${MONITORING_BOT_TOKEN}` (–∑–∞–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è)
- **–ò–º—è**: @neuro_blogger_bot

### –ì—Ä—É–ø–ø–∞ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- **ID –≥—Ä—É–ø–ø—ã**: `-1002250147975`
- **–°—Å—ã–ª–∫–∞**: https://t.me/c/2250147975/1

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–§—É–Ω–∫—Ü–∏–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ Inngest:

```bash
# –ó–∞–ø—É—Å–∫ Inngest Dev Server
npx inngest-cli@latest dev --port 8288

# –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
npm run dev
```

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

```bash
# –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ª–æ–≥–æ–≤
npx ts-node test-events/test-log-monitor.ts
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–ø–æ—Ä—Ç –æ—à–∏–±–æ–∫

```typescript
import { reportError } from '@/utils/errorReporter'

// –í –ª—é–±–æ–º –º–µ—Å—Ç–µ –∫–æ–¥–∞
try {
  // –û–ø–∞—Å–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è
} catch (error) {
  await reportError({
    error,
    endpoint: '/api/some-endpoint',
    userId: 'user123',
    severity: 'critical'
  })
}
```

#### Middleware –¥–ª—è Express

```typescript
import { errorReporterMiddleware } from '@/utils/errorReporter'

// –í app.ts
app.use(errorReporterMiddleware)
```

#### –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

```typescript
import { withErrorReporting } from '@/utils/errorReporter'

const safeFunction = withErrorReporting(
  async (data: any) => {
    // –í–∞—à –∫–æ–¥
  },
  { endpoint: '/api/endpoint' }
)
```

## üìà –¢–∏–ø—ã –æ—Ç—á–µ—Ç–æ–≤

### –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á–µ—Ç –≤–∫–ª—é—á–∞–µ—Ç:
- üìä –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–∑–∞–ø—Ä–æ—Å—ã, —É—Å–ø–µ—à–Ω–æ—Å—Ç—å, –≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞)
- ‚ùå –°–ø–∏—Å–æ–∫ –æ—à–∏–±–æ–∫ —Å —Ä–µ—à–µ–Ω–∏—è–º–∏
- ‚ö° –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏ –∞–Ω–æ–º–∞–ª–∏–∏
- üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é
- üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è (–µ—Å–ª–∏ –µ—Å—Ç—å)

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∞—Ç:
- üêõ –û–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏
- üìç –ú–µ—Å—Ç–æ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è
- üîç AI-–∞–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω—ã
- üõ† –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —à–∞–≥–∏ —Ä–µ—à–µ–Ω–∏—è
- üìö –°—Ç–µ–∫ –≤—ã–∑–æ–≤–æ–≤

## üé® –£—Ä–æ–≤–Ω–∏ –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏

### Critical (üö®)
- –û—à–∏–±–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –û—Ç–∫–∞–∑ –≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏
- –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–∞–º—è—Ç—å—é
- –û—à–∏–±–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π
- –ü—Ä–æ–±–ª–µ–º—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### High (‚ö†Ô∏è)
- –¢–∞–π–º–∞—É—Ç—ã
- –°–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏
- –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- API –æ—à–∏–±–∫–∏

### Medium (‚ÑπÔ∏è)
- –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏
- –ù–µ–∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

## üîç –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞

### Inngest Dashboard
- URL: http://localhost:8288
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- –ò—Å—Ç–æ—Ä–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –õ–æ–≥–∏ –∏ –æ—à–∏–±–∫–∏

### Telegram –≥—Ä—É–ø–ø–∞
- –í—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: https://t.me/c/2250147975/1
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è –∞–¥–º–∏–Ω—É

## üõ† –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```env
# Telegram
ADMIN_TELEGRAM_ID=144022504

# AI –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ (–æ–¥–∏–Ω –∏–∑ –¥–≤—É—Ö)
OPENAI_API_KEY=your_key
DEEPSEEK_API_KEY=your_key

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
LOG_DIR=/tmp/logs
LOG_LEVEL=debug

# Inngest
INNGEST_EVENT_KEY=your_key
INNGEST_DEV_SERVER_URL=http://localhost:8288
```

## üìù –°–æ–±—ã—Ç–∏—è Inngest

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤
```javascript
await inngest.send({
  name: 'logs/monitor.trigger',
  data: { userId: 'admin' }
})
```

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞
```javascript
await inngest.send({
  name: 'app/error.critical',
  data: {
    error: 'Error message',
    stack: 'Stack trace',
    endpoint: '/api/endpoint',
    severity: 'critical'
  }
})
```

## üöÄ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫

1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é –≤ `src/inngest-functions/`
2. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –≤ `index.ts`
3. –î–æ–±–∞–≤—å—Ç–µ –≤ –º–∞—Å—Å–∏–≤ `functions`

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

–í —Ñ—É–Ω–∫—Ü–∏—è—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è cron-—Å–∏–Ω—Ç–∞–∫—Å–∏—Å:
- `0 10 * * *` - –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 10:00 UTC
- `*/30 * * * *` - –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
- `0 * * * *` - –∫–∞–∂–¥—ã–π —á–∞—Å

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–∞–Ω–∞–ª–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

–ú–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤:
- Email
- Slack
- Discord
- SMS

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
- –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
- –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞
- –ß–∞—Å—Ç–æ—Ç—É –æ—à–∏–±–æ–∫
- –¢–æ–ø –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –¢–æ–∫–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è –∞–¥–º–∏–Ω—É
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Inngest Dashboard
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –≤ `/tmp/logs/combined.log`
3. –°–≤—è–∂–∏—Ç–µ—Å—å —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –≤ Telegram

---

*–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∏ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º, –º–∏–Ω–∏–º–∏–∑–∏—Ä—É—è –≤—Ä–µ–º—è –ø—Ä–æ—Å—Ç–æ—è –∏ —É–ª—É—á—à–∞—è –∫–∞—á–µ—Å—Ç–≤–æ —Å–µ—Ä–≤–∏—Å–∞.*
