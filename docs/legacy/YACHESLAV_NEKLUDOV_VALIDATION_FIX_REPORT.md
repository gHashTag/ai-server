# üîß –û–¢–ß–ï–¢ –û–ë –ò–°–ü–†–ê–í–õ–ï–ù–ò–ò –û–®–ò–ë–û–ö –í–ê–õ–ò–î–ê–¶–ò–ò - YACHESLAV_NEKLUDOV

**–î–∞—Ç–∞:** 18 –∏—é–ª—è 2025, 19:00 UTC  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –û–®–ò–ë–ö–ò –í–ê–õ–ò–î–ê–¶–ò–ò –£–°–¢–†–ê–ù–ï–ù–´  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –æ—à–∏–±–∫–∏ Instagram API

## üö® –ü–†–û–ë–õ–ï–ú–´, –ö–û–¢–û–†–´–ï –ë–´–õ–ò –£–°–¢–†–ê–ù–ï–ù–´

### ‚ùå **–û—à–∏–±–∫–∞ 1: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏**

```
Error: Invalid event data: max_reels_per_user: Number must be greater than 0
```

**–ü—Ä–∏—á–∏–Ω–∞:** –°—Ö–µ–º–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ç—Ä–µ–±—É–µ—Ç `max_reels_per_user > 0`, –Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–æ—Å—å `0`  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** –ò–∑–º–µ–Ω–µ–Ω—ã –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å–ª–∞

### ‚ùå **–û—à–∏–±–∫–∞ 2: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ API**

```
Error: API call failed: –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ API –æ—Ç–≤–µ—Ç–∞: data: Expected object, received string
```

**–ü—Ä–∏—á–∏–Ω–∞:** Instagram API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É –æ—à–∏–±–∫–∏ –≤ –ø–æ–ª–µ `data`, –Ω–æ —Å—Ö–µ–º–∞ —Ç—Ä–µ–±—É–µ—Ç –æ–±—ä–µ–∫—Ç  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** –î–æ–±–∞–≤–ª–µ–Ω union —Ç–∏–ø –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å—Ç—Ä–æ–∫ –æ—à–∏–±–æ–∫

### ‚ùå **–û—à–∏–±–∫–∞ 3: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**

```
username: "alexyanovsky" (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "yacheslav_nekludov")
telegram_id: "144022504" (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "289259562")
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## üîß –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### **1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ö–µ–º—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ API**

**–§–∞–π–ª:** `src/core/instagram/schemas.ts`

**–ë—ã–ª–æ:**

```typescript
data: z.object({
  id: z.union([z.string(), z.number()]).optional(),
  users: z.array(InstagramUserSchema),
}),
```

**–°—Ç–∞–ª–æ:**

```typescript
data: z.union([
  z.object({
    id: z.union([z.string(), z.number()]).optional(),
    users: z.array(InstagramUserSchema),
  }),
  z.string(), // API –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å —Å—Ç—Ä–æ–∫—É –æ—à–∏–±–∫–∏
]),
```

### **2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API**

**–§–∞–π–ª:** `src/inngest-functions/instagramScraper-v2.ts`

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**

```typescript
// –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ data –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–æ–π (–æ—à–∏–±–∫–æ–π API)
if (typeof validationResult.data!.data === 'string') {
  log.error(`‚ùå API returned error: ${validationResult.data!.data}`)
  return {
    success: false,
    error: `API error: ${validationResult.data!.data}`,
    users: [],
    total: 0,
  }
}
```

### **3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤–∞–ª–∏–¥–∞—Ü–∏–∏**

**–§–∞–π–ª:** `test-events/test-data-templates.ts`

**–ë—ã–ª–æ:**

```typescript
max_reels_per_user: 0, // ‚ùå –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
```

**–°—Ç–∞–ª–æ:**

```typescript
max_reels_per_user: 5, // ‚úÖ –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ
```

### **4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤–æ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö —à–∞–±–ª–æ–Ω–∞—Ö:**

- `username_or_id`: "yacheslav_nekludov" ‚úÖ
- `requester_telegram_id`: "289259562" ‚úÖ
- `project_id`: 38 ‚úÖ
- `max_users`: 30 ‚úÖ

## üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### **–£—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π):**

1. **findCompetitors:** 01K0EYD835D8V8HEJYJDZYTNAP
2. **analyzeCompetitorReels:** 01K0EYD841ZYWG5V18F7JP767R
3. **extractTopContent:** 01K0EYD8428ZZWP27CE1GEW8RV
4. **generateContentScripts:** 01K0EYD842C1ZAJMCVJRY0RGWD
5. **instagramScraperV2:** 01K0EYD843S0XKNHQAP42ZNKK7

### **–í—Å–µ–≥–æ —Å–æ–±—ã—Ç–∏–π:** 11 (5 –æ—Å–Ω–æ–≤–Ω—ã—Ö + 6 —Ç–µ—Å—Ç–æ–≤—ã—Ö –∫–µ–π—Å–æ–≤)

### **–°—Ç–∞—Ç—É—Å –≤–∞–ª–∏–¥–∞—Ü–∏–∏:** ‚úÖ –í—Å–µ —Å–æ–±—ã—Ç–∏—è –ø—Ä–æ—à–ª–∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é Zod –±–µ–∑ –æ—à–∏–±–æ–∫

## üéØ –¢–ï–•–ù–ò–ß–ï–°–ö–û–ï –û–ë–™–Ø–°–ù–ï–ù–ò–ï

### **–ü—Ä–æ–±–ª–µ–º–∞ —Å Instagram API:**

Instagram API –Ω–µ–ø–æ—Å—Ç–æ—è–Ω–µ–Ω –≤ —Ñ–æ—Ä–º–∞—Ç–µ –æ—Ç–≤–µ—Ç–æ–≤:

- **–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç:** `{ status: "ok", data: { users: [...] } }`
- **–û—à–∏–±–∫–∞:** `{ status: "error", data: "User not found" }`

### **–†–µ—à–µ–Ω–∏–µ:**

–î–æ–±–∞–≤–ª–µ–Ω union —Ç–∏–ø –≤ Zod —Å—Ö–µ–º—É –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –æ–±–æ–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤:

```typescript
data: z.union([
  z.object({ users: z.array(InstagramUserSchema) }), // –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç
  z.string(), // –û—à–∏–±–∫–∞ API
])
```

### **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**

–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –¥–æ—Å—Ç—É–ø–æ–º –∫ –ø–æ–ª—è–º:

```typescript
if (typeof validationResult.data!.data === 'string') {
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ API
}
```

## üîç –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è yacheslav_nekludov:**

```json
{
  "username_or_id": "yacheslav_nekludov",
  "requester_telegram_id": "289259562",
  "project_id": 38,
  "max_users": 30,
  "max_reels_per_user": 5,
  "scrape_reels": true
}
```

### **–í–∞–ª–∏–¥–∞—Ü–∏—è:** ‚úÖ –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–æ—Ö–æ–¥—è—Ç –ø—Ä–æ–≤–µ—Ä–∫—É Zod

### **API –≤—ã–∑–æ–≤—ã:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –æ—à–∏–±–∫–∏ –∏ —É—Å–ø–µ—à–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã

### **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–∏–µ–º—É –¥–∞–Ω–Ω—ã—Ö –≤ project_id 38

## ‚úÖ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã:**

- ‚úÖ –°—Ö–µ–º—ã Zod –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ä–µ–∞–ª—å–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ Instagram API
- ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã (yacheslav_nekludov, 289259562, project_id 38)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ (max_reels_per_user > 0)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API –≤ –≤–∏–¥–µ —Å—Ç—Ä–æ–∫
- ‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø–∞—Ä—Å–∏–Ω–≥—É 30 –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤ –¥–ª—è yacheslav_nekludov —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ Instagram –º–µ—Ç—Ä–∏–∫–∞–º–∏!**

---

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 19:00 UTC, 18 –∏—é–ª—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –ò–°–ü–†–ê–í–õ–ï–ù–û  
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤ Inngest Dashboard
