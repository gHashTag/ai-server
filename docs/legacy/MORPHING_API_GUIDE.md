# üß¨ –ú–æ—Ä—Ñ–∏–Ω–≥ API - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

## üìñ –û–±–∑–æ—Ä

–ú–æ—Ä—Ñ–∏–Ω–≥ API –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–ª–∞–≤–Ω—ã–µ –≤–∏–¥–µ–æ –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–æ–¥–µ–ª–∏ Kling-v1.6. API –ø—Ä–∏–Ω–∏–º–∞–µ—Ç ZIP –∞—Ä—Ö–∏–≤ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≥–æ—Ç–æ–≤–æ–µ MP4 –≤–∏–¥–µ–æ.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

–°–æ–∑–¥–∞–π—Ç–µ ZIP –∞—Ä—Ö–∏–≤ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ:

```
morphing_images.zip
‚îú‚îÄ‚îÄ morphing_frame_1.jpg
‚îú‚îÄ‚îÄ morphing_frame_2.jpg
‚îú‚îÄ‚îÄ morphing_frame_3.jpg
‚îî‚îÄ‚îÄ morphing_frame_4.jpg
```

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º:**

- –§–æ—Ä–º–∞—Ç—ã: `.jpg`, `.jpeg`, `.png`, `.webp`
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: –æ—Ç 2 –¥–æ 100 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –†–∞–∑–º–µ—Ä ZIP –∞—Ä—Ö–∏–≤–∞: –¥–æ 50 –ú–ë
- –ò–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ –¥–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–æ–º–µ—Ä–∞ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏

### 2. –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞

```bash
curl -X POST https://your-server.com/generate/morph-images \
  -H "x-secret-key: YOUR_SECRET_KEY" \
  -F "type=morphing" \
  -F "telegram_id=144022504" \
  -F "images_zip=@morphing_images.zip" \
  -F "image_count=4" \
  -F "morphing_type=seamless" \
  -F "model=kling-v1.6-pro" \
  -F "is_ru=true" \
  -F "bot_name=ai_koshey_bot" \
  -F "username=test_user"
```

### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞

**–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (200 OK):**

```json
{
  "message": "–ú–æ—Ä—Ñ–∏–Ω–≥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É",
  "job_id": "morph_144022504_1735901234567",
  "status": "processing",
  "estimated_time": "5-10 –º–∏–Ω—É—Ç"
}
```

**–û—à–∏–±–∫–∞ (400 Bad Request):**

```json
{
  "message": "–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏",
  "error": "image_count is required and must be a valid number",
  "status": "error"
}
```

## üìã –ü–∞—Ä–∞–º–µ—Ç—Ä—ã API

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä        | –¢–∏–ø    | –û–ø–∏—Å–∞–Ω–∏–µ                  | –ü—Ä–∏–º–µ—Ä                    |
| --------------- | ------ | ------------------------- | ------------------------- |
| `type`          | string | –¢–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏              | `"morphing"`              |
| `telegram_id`   | string | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram  | `"144022504"`             |
| `images_zip`    | File   | ZIP –∞—Ä—Ö–∏–≤ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ | `morphing_images.zip`     |
| `image_count`   | string | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π    | `"4"`                     |
| `morphing_type` | string | –¢–∏–ø –º–æ—Ä—Ñ–∏–Ω–≥–∞              | `"seamless"` –∏–ª–∏ `"loop"` |
| `model`         | string | –ú–æ–¥–µ–ª—å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏      | `"kling-v1.6-pro"`        |
| `is_ru`         | string | –Ø–∑—ã–∫ –æ—Ç–≤–µ—Ç–æ–≤              | `"true"` –∏–ª–∏ `"false"`    |
| `bot_name`      | string | –ò–º—è –±–æ—Ç–∞                  | `"ai_koshey_bot"`         |
| `username`      | string | –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è          | `"test_user"`             |

### –ó–∞–≥–æ–ª–æ–≤–∫–∏

| –ó–∞–≥–æ–ª–æ–≤–æ–∫      | –û–ø–∏—Å–∞–Ω–∏–µ                    | –ü—Ä–∏–º–µ—Ä                |
| -------------- | --------------------------- | --------------------- |
| `x-secret-key` | API –∫–ª—é—á –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ | `your-secret-key`     |
| `Content-Type` | –¢–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞                | `multipart/form-data` |

## üé¨ –¢–∏–ø—ã –º–æ—Ä—Ñ–∏–Ω–≥–∞

### Seamless (–ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã)

- –°–æ–∑–¥–∞–µ—Ç –ø–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –∫–∞–¥—Ä–æ–≤

### Loop (–ó–∞—Ü–∏–∫–ª–µ–Ω–Ω–æ–µ –≤–∏–¥–µ–æ)

- –°–æ–∑–¥–∞–µ—Ç –∑–∞—Ü–∏–∫–ª–µ–Ω–Ω–æ–µ –≤–∏–¥–µ–æ
- –ü–æ—Å–ª–µ–¥–Ω–∏–π –∫–∞–¥—Ä –ø–ª–∞–≤–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ –ø–µ—Ä–≤—ã–π
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π

## üíª –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### JavaScript (Node.js)

```javascript
const FormData = require('form-data')
const fs = require('fs')
const axios = require('axios')

async function createMorphingVideo() {
  const form = new FormData()

  // –î–æ–±–∞–≤–ª—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
  form.append('type', 'morphing')
  form.append('telegram_id', '144022504')
  form.append('image_count', '3')
  form.append('morphing_type', 'seamless')
  form.append('model', 'kling-v1.6-pro')
  form.append('is_ru', 'true')
  form.append('bot_name', 'ai_koshey_bot')
  form.append('username', 'test_user')

  // –î–æ–±–∞–≤–ª—è–µ–º ZIP —Ñ–∞–π–ª
  form.append('images_zip', fs.createReadStream('./morphing_images.zip'))

  try {
    const response = await axios.post(
      'https://your-server.com/generate/morph-images',
      form,
      {
        headers: {
          'x-secret-key': 'YOUR_SECRET_KEY',
          ...form.getHeaders(),
        },
      }
    )

    console.log('–ú–æ—Ä—Ñ–∏–Ω–≥ –∑–∞–ø—É—â–µ–Ω:', response.data)
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞:', error.response?.data || error.message)
  }
}

createMorphingVideo()
```

### Python

```python
import requests

def create_morphing_video():
    url = 'https://your-server.com/generate/morph-images'

    headers = {
        'x-secret-key': 'YOUR_SECRET_KEY'
    }

    data = {
        'type': 'morphing',
        'telegram_id': '144022504',
        'image_count': '3',
        'morphing_type': 'seamless',
        'model': 'kling-v1.6-pro',
        'is_ru': 'true',
        'bot_name': 'ai_koshey_bot',
        'username': 'test_user'
    }

    files = {
        'images_zip': open('morphing_images.zip', 'rb')
    }

    try:
        response = requests.post(url, headers=headers, data=data, files=files)
        response.raise_for_status()

        result = response.json()
        print(f"–ú–æ—Ä—Ñ–∏–Ω–≥ –∑–∞–ø—É—â–µ–Ω: {result}")

    except requests.exceptions.RequestException as e:
        print(f"–û—à–∏–±–∫–∞: {e}")
    finally:
        files['images_zip'].close()

create_morphing_video()
```

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏

1. **–í–∞–ª–∏–¥–∞—Ü–∏—è** - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ —Ñ–∞–π–ª–æ–≤
2. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ** - –†–∞—Å–ø–∞–∫–æ–≤–∫–∞ ZIP –∞—Ä—Ö–∏–≤–∞ –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
3. **–ú–æ—Ä—Ñ–∏–Ω–≥** - –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Kling-v1.6 API –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
4. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** - –ó–∞–≥—Ä—É–∑–∫–∞ –≥–æ—Ç–æ–≤–æ–≥–æ –≤–∏–¥–µ–æ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
5. **–î–æ—Å—Ç–∞–≤–∫–∞** - –û—Ç–ø—Ä–∞–≤–∫–∞ –≤–∏–¥–µ–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤ Telegram

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –§–∞–π–ª—ã

- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä ZIP:** 50 –ú–ë
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:** –æ—Ç 2 –¥–æ 100
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:** JPG, JPEG, PNG, WebP
- **–ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤:** –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —á–∏—Å–ª–∞ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏:** 5-10 –º–∏–Ω—É—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **–¢–∞–π–º–∞—É—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏:** 10 –º–∏–Ω—É—Ç
- **–ö–∞—á–µ—Å—Ç–≤–æ –≤–∏–¥–µ–æ:** –≤—ã—Å–æ–∫–æ–µ (–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è Kling-v1.6)

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

- –¢—Ä–µ–±—É–µ—Ç—Å—è –≤–∞–ª–∏–¥–Ω—ã–π `x-secret-key`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–∏—Å—Ç–µ–º–µ

## üö® –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏

| –ö–æ–¥ | –û—à–∏–±–∫–∞                                    | –†–µ—à–µ–Ω–∏–µ                                     |
| --- | ----------------------------------------- | ------------------------------------------- |
| 400 | `type is required and must be "morphing"` | –ü–µ—Ä–µ–¥–∞–π—Ç–µ `type=morphing`                   |
| 400 | `images_zip file is required`             | –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ ZIP —Ñ–∞–π–ª –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω          |
| 400 | `User validation failed`                  | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `telegram_id` –∏ `username`        |
| 500 | `ZIP extraction failed`                   | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å ZIP –∞—Ä—Ö–∏–≤–∞           |
| 500 | `Kling processing failed`                 | –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É |

### –û—Ç–ª–∞–¥–∫–∞

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞:** `GET /`
2. **–í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ ZIP –∞—Ä—Ö–∏–≤:** —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:** —Å–µ—Ä–≤–µ—Ä –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:** `node test-morphing-endpoint.js`

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
export SECRET_API_KEY=your-secret-key

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç
node test-morphing-endpoint.js
```

### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ ZIP –∞—Ä—Ö–∏–≤–∞

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
mkdir test_images
cd test_images

# –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
cp image1.jpg morphing_frame_1.jpg
cp image2.jpg morphing_frame_2.jpg
cp image3.jpg morphing_frame_3.jpg

# –°–æ–∑–¥–∞–π—Ç–µ ZIP –∞—Ä—Ö–∏–≤
zip ../test_morphing_images.zip *.jpg
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –Ω–∞–±–æ—Ä–æ–º –¥–∞–Ω–Ω—ã—Ö
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –æ—à–∏–±–∫–∏

## üîÑ Changelog

### v1.0.0 (2024-12-XX)

- ‚úÖ –ë–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–æ—Ä—Ñ–∏–Ω–≥ API
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Kling-v1.6
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ seamless –∏ loop —Ä–µ–∂–∏–º–æ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –≤ Telegram
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

---

_–°–æ–∑–¥–∞–Ω–æ –∫–æ–º–∞–Ω–¥–æ–π AI-Server Development Team_
