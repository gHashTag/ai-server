# ‚úÖ –ö–∞–∫ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ Veo API

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å URL-–∑–∞–ø—Ä–æ—Å–æ–º (cURL)

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# 1. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –≤ Google Cloud
gcloud auth login

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
gcloud config set project neuroblogger

# 3. –û–±–Ω–æ–≤–∏—Ç–µ —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞ (–¥–µ–ª–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
gcloud auth application-default login

# 4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
cd /Users/playra/ai-server
npm install

# 5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
npm run dev
```

### 2. URL-–∑–∞–ø—Ä–æ—Å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–∏–¥–µ–æ

–û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π cURL –∑–∞–ø—Ä–æ—Å:

```bash
curl -X POST http://localhost:4000/generate/text-to-video \
  -H "Content-Type: application/json" \
  -d '{
    "prompt": "A black cat in a wizard hat casting a spell",
    "videoModel": "veo-3",
    "telegram_id": "123456789",
    "username": "test_user",
    "is_ru": false,
    "bot_name": "your_test_bot"
  }'
```

## üìä –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —ç—Ç–æ–º –∑–∞–ø—Ä–æ—Å–µ

1.  **`POST http://localhost:4000/generate/text-to-video`**
    - –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ –≤–∞—à –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä

2.  **`"videoModel": "veo-3"`**
    - –£–∫–∞–∑—ã–≤–∞–µ–º, —á—Ç–æ —Ö–æ—Ç–∏–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Google Veo 3

3.  **`"prompt": "..."`**
    - –í–∞—à –ø—Ä–æ–º–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–∏–¥–µ–æ

## ‚öôÔ∏è –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–Ω—É—Ç—Ä–∏

1.  **–í–∞—à —Å–µ—Ä–≤–µ—Ä** –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å.
2.  **`generateTextToVideo.ts`** –≤–∏–¥–∏—Ç `videoModel: 'veo-3'`.
3.  –í—ã–∑—ã–≤–∞–µ—Ç—Å—è **`VertexVeoService`**.
4.  **`VertexVeoService`**:
    - ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ **`gcloud auth`**
    - ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –≤ **Vertex AI API**
    - ‚úÖ –ñ–¥—ë—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏ (~45 —Å–µ–∫—É–Ω–¥)
    - ‚úÖ –°–∫–∞—á–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ –∏–∑ **Google Cloud Storage**
    - ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤–∏–¥–µ–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤ Telegram

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

- **–°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å:** 8 —Å–µ–∫—É–Ω–¥ * $0.40 = **$3.20**
- **–¶–µ–Ω–∞ –≤ –∑–≤—ë–∑–¥–∞—Ö:** (3.20 / 0.016) * 1.5 = **300 –∑–≤—ë–∑–¥**

## üìù –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è URL-–∑–∞–ø—Ä–æ—Å–∞

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-------|----------|
| `prompt` | string | –¢–µ–∫—Å—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–∏–¥–µ–æ |
| `videoModel` | string | `veo-3` –∏–ª–∏ `veo-2` |
| `telegram_id` | string | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Telegram |
| `username` | string | –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `bot_name` | string | –ò–º—è –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ |

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|---------|--------------|----------|
| `is_ru` | boolean | `false` | –Ø–∑—ã–∫ –æ—Ç–≤–µ—Ç–∞ |

## üöÄ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

1.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:**
    ```bash
    node scripts/checks/test-vertex-veo.js
    ```
    *–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ –í–∏–¥–µ–æ —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ!* 

2.  **–û—Ç–ø—Ä–∞–≤—å—Ç–µ URL-–∑–∞–ø—Ä–æ—Å (cURL):**
    - –í—ã –¥–æ–ª–∂–Ω—ã –ø–æ–ª—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ `{"message":"Processing started"}`
    - –í —Ç–µ—á–µ–Ω–∏–µ –º–∏–Ω—É—Ç—ã –±–æ—Ç –¥–æ–ª–∂–µ–Ω –ø—Ä–∏—Å–ª–∞—Ç—å –≤–∞–º –≤–∏–¥–µ–æ

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

-   **–û—à–∏–±–∫–∞ 403 (Forbidden)**
    - **–†–µ—à–µ–Ω–∏–µ:** `gcloud auth application-default login`

-   **–í–∏–¥–µ–æ –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç**
    - **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ (`pm2 logs`)
    - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ gcloud –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ

-   **–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–≤—ë–∑–¥**
    - **–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è > 300 –∑–≤—ë–∑–¥

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **Vertex AI Veo:** [–°—Å—ã–ª–∫–∞ –Ω–∞ Google Docs](https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/veo-video-generation)
- **–í–∞—à —Å–µ—Ä–≤–∏—Å:** `src/services/vertexVeoService.ts`
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** `src/config/models.config.ts`

---

**–ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ Veo —Å –ø–æ–º–æ—â—å—é –ø—Ä–æ—Å—Ç–æ–≥–æ URL-–∑–∞–ø—Ä–æ—Å–∞.**
