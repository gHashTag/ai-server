# üì± Instagram Scraper V2 - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üéØ –û–±–∑–æ—Ä

Instagram Scraper V2 - —ç—Ç–æ —É–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –ø–∞—Ä—Å–µ—Ä–∞ Instagram, –∫–æ—Ç–æ—Ä–∞—è:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ–µ–∫—Ç–∞–º–∏
- –ü–∞—Ä—Å–∏—Ç –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤ –∏ –∏—Ö —Ä–∏–ª—Å—ã
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ PostgreSQL —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ –ø—Ä–æ–µ–∫—Ç–∞–º
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç—á–µ—Ç—ã –≤ HTML –∏ Excel
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ Telegram

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           Inngest Event                  ‚îÇ
‚îÇ         (instagram-scraping-v2)          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îÇ
             ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      InstagramScraperV2 Function        ‚îÇ
‚îÇ         (instagramScraper-v2.ts)        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 1. –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (Zod)       ‚îÇ
‚îÇ 2. –ü—Ä–æ–≤–µ—Ä–∫–∞/—Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞            ‚îÇ
‚îÇ 3. –í—ã–∑–æ–≤ Instagram API                  ‚îÇ
‚îÇ 4. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î                      ‚îÇ
‚îÇ 5. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤                    ‚îÇ
‚îÇ 6. –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚ñº        ‚ñº        ‚ñº        ‚ñº         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇProject ‚îÇ‚îÇIG    ‚îÇ‚îÇ DB   ‚îÇ‚îÇReport‚îÇ‚îÇ Telegram ‚îÇ
‚îÇManager ‚îÇ‚îÇ API  ‚îÇ‚îÇRepos ‚îÇ‚îÇ Gen  ‚îÇ‚îÇ   Bot    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
inngest/functions/instagram/
‚îú‚îÄ‚îÄ instagramScraper-v2.ts      # –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞ V2
‚îú‚îÄ‚îÄ instagramSingleUser.ts      # –ü–∞—Ä—Å–∏–Ω–≥ –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îú‚îÄ‚îÄ project-manager.ts          # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏
‚îú‚îÄ‚îÄ schemas.ts                  # Zod —Å—Ö–µ–º—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ repositories/
‚îÇ   ‚îú‚îÄ‚îÄ instagram-reels.ts      # –†–∞–±–æ—Ç–∞ —Å —Ç–∞–±–ª–∏—Ü–µ–π —Ä–∏–ª—Å–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ instagram-users.ts      # –†–∞–±–æ—Ç–∞ —Å —Ç–∞–±–ª–∏—Ü–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îî‚îÄ‚îÄ utils/
    ‚îú‚îÄ‚îÄ report-generator.ts     # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è HTML/Excel –æ—Ç—á–µ—Ç–æ–≤
    ‚îî‚îÄ‚îÄ telegram.ts             # –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram
```

---

## üîß –°—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö (Zod)

### InstagramScrapingEventSchema
```typescript
{
  username_or_id: string,              // Instagram username –∏–ª–∏ ID (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  project_id?: number,                 // ID –ø—Ä–æ–µ–∫—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  requester_telegram_id?: string,      // Telegram ID –∑–∞–ø—Ä–æ—Å–∏–≤—à–µ–≥–æ
  telegram_username?: string,          // Telegram username
  bot_name?: string,                   // –ò–º—è –±–æ—Ç–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: neuro_blogger_bot)
  max_users?: number,                  // –ú–∞–∫—Å. –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 50)
  scrape_reels?: boolean,              // –ü–∞—Ä—Å–∏—Ç—å —Ä–∏–ª—Å—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: false)
  max_reels_per_user?: number,        // –ú–∞–∫—Å. —Ä–∏–ª—Å–æ–≤ –Ω–∞ —é–∑–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 10)
  language?: 'ru' | 'en'              // –Ø–∑—ã–∫ –æ—Ç—á–µ—Ç–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 'en')
}
```

### SingleUserScrapingEventSchema
```typescript
{
  username: string,                    // Instagram username (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  project_id?: number,                 // ID –ø—Ä–æ–µ–∫—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  telegram_user_id?: string,          // Telegram ID
  telegram_username?: string,         // Telegram username
  bot_name?: string                   // –ò–º—è –±–æ—Ç–∞
}
```

---

## üöÄ –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—É—Å–∫–∞ —á–µ—Ä–µ–∑ Inngest

### 1. –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å (–∞–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞)
```javascript
await inngest.send({
  name: "instagram-scraping-v2",
  data: {
    username_or_id: "cristiano",
    requester_telegram_id: "123456789",
    telegram_username: "john_doe"
  }
});
```

### 2. –° —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤
```javascript
await inngest.send({
  name: "instagram-scraping-v2",
  data: {
    username_or_id: "nike",
    requester_telegram_id: "123456789",
    telegram_username: "marketing_team",
    max_users: 100,
    scrape_reels: false
  }
});
```

### 3. –ü–æ–ª–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ —Å —Ä–∏–ª—Å–∞–º–∏
```javascript
await inngest.send({
  name: "instagram-scraping-v2",
  data: {
    username_or_id: "adidas",
    requester_telegram_id: "987654321",
    telegram_username: "content_manager",
    bot_name: "analytics_bot",
    max_users: 75,
    scrape_reels: true,
    max_reels_per_user: 15,
    language: "ru"
  }
});
```

### 4. –° —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º project_id
```javascript
await inngest.send({
  name: "instagram-scraping-v2",
  data: {
    username_or_id: "messi",
    project_id: 42,
    max_users: 50,
    scrape_reels: true
  }
});
```

### 5. –ü–∞—Ä—Å–∏–Ω–≥ –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```javascript
await inngest.send({
  name: "instagram-single-user",
  data: {
    username: "ronaldo",
    telegram_user_id: "123456789",
    telegram_username: "sports_analyst"
  }
});
```

---

## üíæ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `projects`
```sql
CREATE TABLE projects (
  id SERIAL PRIMARY KEY,
  name VARCHAR(255) NOT NULL,
  telegram_id VARCHAR(255),
  telegram_username VARCHAR(255),
  bot_name VARCHAR(255),
  description TEXT,
  is_active BOOLEAN DEFAULT true,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW(),
  metadata JSONB,
  UNIQUE(telegram_id, bot_name)
);
```

### –¢–∞–±–ª–∏—Ü–∞ `instagram_similar_users`
```sql
CREATE TABLE instagram_similar_users (
  id SERIAL PRIMARY KEY,
  project_id INTEGER REFERENCES projects(id),
  instagram_user_id VARCHAR(255),
  username VARCHAR(255),
  full_name VARCHAR(255),
  is_private BOOLEAN,
  is_verified BOOLEAN,
  profile_pic_url TEXT,
  profile_pic_url_hd TEXT,
  biography TEXT,
  follower_count INTEGER,
  following_count INTEGER,
  media_count INTEGER,
  external_url VARCHAR(255),
  category VARCHAR(255),
  is_business_account BOOLEAN,
  public_email VARCHAR(255),
  contact_phone_number VARCHAR(50),
  public_phone_country_code VARCHAR(10),
  public_phone_number VARCHAR(50),
  business_contact_method VARCHAR(50),
  engagement_rate DECIMAL(5,2),
  avg_likes INTEGER,
  avg_comments INTEGER,
  last_post_date TIMESTAMP,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW(),
  metadata JSONB
);
```

### –¢–∞–±–ª–∏—Ü–∞ `instagram_user_reels`
```sql
CREATE TABLE instagram_user_reels (
  id SERIAL PRIMARY KEY,
  project_id INTEGER REFERENCES projects(id),
  instagram_user_id VARCHAR(255),
  username VARCHAR(255),
  reel_id VARCHAR(255),
  reel_code VARCHAR(255),
  caption TEXT,
  media_type VARCHAR(50),
  video_url TEXT,
  thumbnail_url TEXT,
  like_count INTEGER,
  comment_count INTEGER,
  play_count INTEGER,
  share_count INTEGER,
  save_count INTEGER,
  view_count INTEGER,
  duration DECIMAL(10,2),
  created_time TIMESTAMP,
  location_name VARCHAR(255),
  location_id VARCHAR(255),
  is_paid_partnership BOOLEAN,
  sponsor_tags JSONB,
  hashtags JSONB,
  mentions JSONB,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW(),
  metadata JSONB
);
```

---

## üìä –§–æ—Ä–º–∞—Ç –æ—Ç—á–µ—Ç–æ–≤

### HTML –æ—Ç—á–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç:
- üìà –°–≤–æ–¥–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- üë• –¢–æ–ø –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤ –ø–æ –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º
- üíé –¢–æ–ø –ø–æ engagement rate
- üé¨ –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ä–∏–ª—Å–æ–≤ (–µ—Å–ª–∏ –ø–∞—Ä—Å–∏–ª–∏—Å—å)
- üì± –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–∞–∂–¥–æ–º –∞–∫–∫–∞—É–Ω—Ç–µ

### Excel –æ—Ç—á–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–∏—Å—Ç—ã:
1. **Summary** - –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
2. **Users** - –≤—Å–µ —Å–ø–∞—Ä—Å–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
3. **Reels** - –≤—Å–µ —Ä–∏–ª—Å—ã (–µ—Å–ª–∏ –ø–∞—Ä—Å–∏–ª–∏—Å—å)
4. **Top Engagement** - —Ç–æ–ø –ø–æ –≤–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç–∏
5. **Business Accounts** - –±–∏–∑–Ω–µ—Å-–∞–∫–∫–∞—É–Ω—Ç—ã

---

## üîå API Instagram (RapidAPI)

### Endpoints –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ:

1. **GET /user_info** - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
```javascript
const userInfo = await instagramAPI.getUserInfo(username);
```

2. **GET /user_similar_accounts** - –ø–æ—Ö–æ–∂–∏–µ –∞–∫–∫–∞—É–Ω—Ç—ã
```javascript
const similarUsers = await instagramAPI.getSimilarAccounts(userId, count);
```

3. **GET /user_reels** - —Ä–∏–ª—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```javascript
const reels = await instagramAPI.getUserReels(userId, count);
```

---

## ü§ñ Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram:
```
‚úÖ Instagram Scraping Complete!

üìä Results:
‚Ä¢ Target: @cristiano
‚Ä¢ Similar users found: 50
‚Ä¢ Reels scraped: 250
‚Ä¢ Processing time: 45 seconds

üìé Download your report:
[Download Report Archive]

The report includes:
‚Ä¢ HTML visualization
‚Ä¢ Excel data export
‚Ä¢ All scraped data

üí° Project ID: 42
```

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –±–æ—Ç—ã:
- `neuro_blogger_bot` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- `analytics_bot`
- –õ—é–±–æ–π –∫–∞—Å—Ç–æ–º–Ω—ã–π –±–æ—Ç —Å —Ç–æ–∫–µ–Ω–æ–º –≤ ENV

---

## üîê –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
SUPABASE_URL=postgresql://user:password@host:5432/database

# Instagram API (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
RAPIDAPI_INSTAGRAM_KEY=your_rapidapi_key_here
RAPIDAPI_INSTAGRAM_HOST=instagram-scraper-api3.p.rapidapi.com

# Telegram –±–æ—Ç—ã
BOT_TOKEN_NEURO_BLOGGER=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
BOT_TOKEN_ANALYTICS=0987654321:ZYXwvuTSRqpONMlkjIHGfedCBA

# S3/Storage (–¥–ª—è –æ—Ç—á–µ—Ç–æ–≤)
S3_BUCKET=your-bucket-name
S3_REGION=us-east-1
AWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMPLE
AWS_SECRET_ACCESS_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY

# Inngest
INNGEST_EVENT_KEY=your_inngest_key
INNGEST_SIGNING_KEY=your_signing_key
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ —Å Inngest Dev Server:
```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å Inngest Dev Server
npx inngest-cli@latest dev

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
npm run dev

# 3. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ —á–µ—Ä–µ–∑ UI
# –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ http://localhost:8288
```

### –ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∞ —á–µ—Ä–µ–∑ curl:
```bash
curl -X POST http://localhost:8288/e/instagram-scraping-v2 \
  -H "Content-Type: application/json" \
  -d '{
    "data": {
      "username_or_id": "cristiano",
      "requester_telegram_id": "123456789",
      "telegram_username": "test_user",
      "max_users": 5,
      "scrape_reels": true,
      "max_reels_per_user": 3
    }
  }'
```

---

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –ª–∏–º–∏—Ç—ã

### Instagram API:
- **Rate limit**: 100 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É
- **Max users per request**: 200
- **Max reels per user**: 50
- **Retry attempts**: 3 —Å exponential backoff

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
- **Max connections**: 100
- **Query timeout**: 30 —Å–µ–∫—É–Ω–¥
- **Batch insert size**: 1000 –∑–∞–ø–∏—Å–µ–π

### –û—Ç—á–µ—Ç—ã:
- **Max HTML size**: 50 MB
- **Max Excel rows**: 1,048,576
- **Archive max size**: 100 MB

---

## üêõ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è retry:
```typescript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π retry –¥–ª—è Instagram API
const retryConfig = {
  attempts: 3,
  delay: (attempt) => Math.pow(2, attempt) * 1000, // 2s, 4s, 8s
  onRetry: (error, attempt) => {
    logger.warn(`Retry attempt ${attempt}:`, error);
  }
};
```

### –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏:

1. **Invalid project_id**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
   
2. **Instagram user not found**
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞ —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º –ø—Ä–æ–≤–µ—Ä–∏—Ç—å username

3. **Rate limit exceeded**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π retry —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π

4. **Database connection error**
   - Retry —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π

---

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### Inngest Dashboard –º–µ—Ç—Ä–∏–∫–∏:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ø–µ—à–Ω—ã—Ö –ø–∞—Ä—Å–∏–Ω–≥–æ–≤
- –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫
- –†–∞–∑–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–æ–≥–æ–≤:
```typescript
{
  timestamp: "2024-01-15T10:30:00Z",
  level: "info",
  function: "instagramScraper-v2",
  event_id: "evt_123abc",
  project_id: 42,
  username: "cristiano",
  users_found: 50,
  reels_scraped: 250,
  duration_ms: 45000,
  status: "success"
}
```

---

## üîÑ –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

- **v2.0.0** - –¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Å–æ–∑–¥–∞–Ω–∏–µ–º –ø—Ä–æ–µ–∫—Ç–æ–≤
- **v1.0.0** - Legacy –≤–µ—Ä—Å–∏—è —Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º project_id

### –ú–∏–≥—Ä–∞—Ü–∏—è —Å v1 –Ω–∞ v2:
1. project_id —Ç–µ–ø–µ—Ä—å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π
2. –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è telegram_username, bot_name
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤
4. –£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ Zod

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Inngest Dashboard
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ ENV –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏–º–∏—Ç—ã API
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∫–æ–º–∞–Ω–¥–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –∑–∞–ø—É—Å–∫–∞

- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã ENV –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- [ ] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç—É–ø–Ω–∞
- [ ] –¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã (projects, instagram_similar_users, instagram_user_reels)
- [ ] Instagram API –∫–ª—é—á –∞–∫—Ç–∏–≤–µ–Ω
- [ ] Telegram –±–æ—Ç —Ç–æ–∫–µ–Ω –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] Inngest —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
- [ ] S3/Storage –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤
- [ ] –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ
