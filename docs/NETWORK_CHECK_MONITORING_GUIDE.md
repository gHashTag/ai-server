# üåê Network Check Monitoring System - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## üéØ –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ network check –æ—à–∏–±–æ–∫, –∫–æ—Ç–æ—Ä–∞—è —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤, —É–≤–µ–¥–æ–º–ª—è–µ—Ç –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö –∏ –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–æ–ø—ã—Ç–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. **Network Check Monitor** (`networkCheckMonitor`)

- **–ó–∞–ø—É—Å–∫**: –ö–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç
- **–§—É–Ω–∫—Ü–∏—è**: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- **–ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã**:
  - Main API (`/`)
  - Health Check (`/health`)
  - User Balance API (`/api/user/balance`)
  - Generation Status (`/api/generation/status`)

### 2. **Post-Deploy Network Check** (`postDeployNetworkCheck`)

- **–ó–∞–ø—É—Å–∫**: –ü–æ—Å–ª–µ —Å–æ–±—ã—Ç–∏—è `deployment/completed`
- **–§—É–Ω–∫—Ü–∏—è**: –ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
- **–ê–ª–≥–æ—Ä–∏—Ç–º**: 3 –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º –≤ 1 –º–∏–Ω—É—Ç—É –ø–æ—Å–ª–µ 2-–º–∏–Ω—É—Ç–Ω–æ–≥–æ –æ–∂–∏–¥–∞–Ω–∏—è

### 3. **Deployment Auto Detector** (`deploymentAutoDetector`)

- **–ó–∞–ø—É—Å–∫**: –ö–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
- **–§—É–Ω–∫—Ü–∏—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –¥–µ–ø–ª–æ–µ–≤
- **–î–µ—Ç–µ–∫—Ü–∏—è**: –ü–æ –∏–∑–º–µ–Ω–µ–Ω–∏—é –≤–µ—Ä—Å–∏–∏ Railway/Docker

### 4. **Deployment Recovery System** (`deploymentRecoverySystem`)

- **–ó–∞–ø—É—Å–∫**: –ü–æ —Å–æ–±—ã—Ç–∏—é `deployment/recovery-needed`
- **–§—É–Ω–∫—Ü–∏—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö
- **–î–µ–π—Å—Ç–≤–∏—è**: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤, –æ–∂–∏–¥–∞–Ω–∏–µ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏

### 5. **Railway Deployment Webhook** (`railwayDeploymentWebhook`)

- **–ó–∞–ø—É—Å–∫**: –ü–æ webhook –æ—Ç Railway
- **–§—É–Ω–∫—Ü–∏—è**: –û–±—Ä–∞–±–æ—Ç–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –¥–µ–ø–ª–æ–µ –æ—Ç Railway

## üìä –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã

### –û–±—ã—á–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:

1. **–ö–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
2. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç—Ä–µ–Ω–¥–æ–≤
3. **–ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–¥–æ–≤** –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 2 —á–∞—Å–∞
4. **–û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π** —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º

### –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ** –Ω–æ–≤–æ–≥–æ –¥–µ–ø–ª–æ—è
2. **–û–∂–∏–¥–∞–Ω–∏–µ 2 –º–∏–Ω—É—Ç—ã** –¥–ª—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏
3. **3 –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥—Ä—è–¥** —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º –≤ 1 –º–∏–Ω—É—Ç—É
4. **–ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–∞
5. **–ó–∞–ø—É—Å–∫ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è** –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–Ω–æ–º –ø—Ä–æ—Ü–µ–Ω—Ç–µ –Ω–µ—É–¥–∞—á (>50%)

### –°–∏—Å—Ç–µ–º–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:

1. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–∞—á–∞–ª–µ** –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤** (Railway API/Docker)
3. **–û–∂–∏–¥–∞–Ω–∏–µ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏** (2 –º–∏–Ω—É—Ç—ã)
4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞** (5 –º–∏–Ω—É—Ç –æ–∂–∏–¥–∞–Ω–∏—è)
5. **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –æ—Ç–∫–∞—Ç–∞** –µ—Å–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–µ –ø–æ–º–æ–≥–ª–æ

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```env
# –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
APP_URL=https://your-app-url.railway.app
ADMIN_CHAT_ID=-1002250147975
ADMIN_TELEGRAM_ID=144022504

# Railway –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
RAILWAY_DEPLOYMENT_ID=auto-generated
RAILWAY_GIT_COMMIT_SHA=auto-generated
RAILWAY_GIT_BRANCH=auto-generated

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ - Railway API –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
RAILWAY_TOKEN=your-railway-token
```

### 2. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã:

```sql
CREATE TABLE network_check_history (
  id SERIAL PRIMARY KEY,
  endpoint VARCHAR(255) NOT NULL,
  status VARCHAR(20) NOT NULL,
  response_time INTEGER NOT NULL,
  error_message TEXT,
  checked_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

### 3. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–π

–§—É–Ω–∫—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –≤ `src/inngest-functions/index.ts`:

```typescript
import {
  networkCheckMonitor,
  triggerNetworkCheck,
  postDeployNetworkCheck,
} from './networkCheckMonitor'

export const functions = [
  // ... –¥—Ä—É–≥–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
  networkCheckMonitor,
  triggerNetworkCheck,
  postDeployNetworkCheck,
  deploymentAutoDetector,
  deploymentRecoverySystem,
  railwayDeploymentWebhook,
]
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:

```bash
# –ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤
node tests/network-check/test-network-monitoring.js

# –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ network check
npx inngest-cli@latest send -n "network/trigger-check" -d '{"userId":"admin"}'

# –°–∏–º—É–ª—è—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–µ–ø–ª–æ—è
npx inngest-cli@latest send -n "deployment/completed" -d '{"version":"test-v1.0.0","deployedAt":"'$(date -u +%Y-%m-%dT%H:%M:%SZ)'"}'
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:

1. **Inngest Dashboard**: http://localhost:8288
2. **–õ–æ–≥–∏ —Ñ—É–Ω–∫—Ü–∏–π** –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
3. **Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –≤ –≥—Ä—É–ø–ø–µ
4. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - —Ç–∞–±–ª–∏—Ü–∞ `network_check_history`

## üì± –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### –¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:

#### üåê Network Check Failure

```
üö®üåê NETWORK CHECK FAILURE!

üïê –í—Ä–µ–º—è: 23.08.2025, 15:30:00
üöÄ –î–µ–ø–ª–æ–π: v1.2.3 (15 –º–∏–Ω –Ω–∞–∑–∞–¥)

üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ 2 —á–∞—Å–∞:
‚Ä¢ –í—Å–µ–≥–æ –ø—Ä–æ–≤–µ—Ä–æ–∫: 36
‚Ä¢ –ù–µ—É–¥–∞—á–Ω—ã—Ö: 8 (22.2%)

üîç –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏:
‚ùå Main API (timeout)
‚úÖ Health Check (245ms)
‚ùå User Balance API (HTTP 500)
‚úÖ Generation Status (156ms)

‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:
‚Ä¢ Main API
‚Ä¢ User Balance API

üõ† –î–µ–π—Å—Ç–≤–∏—è:
‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å–ø–µ—à–Ω–æ—Å—Ç—å –¥–µ–ø–ª–æ—è
‚Ä¢ –û—Ç–∫–∞—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–æ–≤
‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ç–µ–≤—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
```

#### üöÄ Post-Deploy Report

```
üöÄ POST-DEPLOY NETWORK CHECK REPORT

üì¶ –í–µ—Ä—Å–∏—è: railway-deploy-abc123
üïê –í—Ä–µ–º—è –¥–µ–ø–ª–æ—è: 23.08.2025, 15:15:00

üìä –†–µ–∑—É–ª—å—Ç–∞—Ç 3-—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫:
‚Ä¢ –í—Å–µ–≥–æ –ø—Ä–æ–≤–µ—Ä–æ–∫: 12
‚Ä¢ –£—Å–ø–µ—à–Ω—ã—Ö: 12
‚Ä¢ –ù–µ—É–¥–∞—á–Ω—ã—Ö: 0
‚Ä¢ –ü—Ä–æ—Ü–µ–Ω—Ç –Ω–µ—É–¥–∞—á: 0.0%

‚úÖ –î–ï–ü–õ–û–ô –£–°–ü–ï–®–ï–ù - –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã
```

#### üõ† Recovery System

```
üõ† –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–û–ï –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï –ó–ê–ü–£–©–ï–ù–û

üì¶ –ü—Ä–æ–±–ª–µ–º–Ω–∞—è –≤–µ—Ä—Å–∏—è: v1.2.3
üìä –ü—Ä–æ—Ü–µ–Ω—Ç –Ω–µ—É–¥–∞—á: 75%
‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã: Main API, User Balance API

üîÑ –ù–∞—á–∏–Ω–∞—é –ø—Ä–æ—Ü–µ–¥—É—Ä—É –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è...
```

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥–µ–ø–ª–æ–µ–º

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Railway:

Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

- `RAILWAY_DEPLOYMENT_ID`
- `RAILWAY_GIT_COMMIT_SHA`
- `RAILWAY_GIT_BRANCH`

### –†—É—á–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:

```typescript
import { manualDeploymentNotification } from '@/utils/deploymentReporter'

// –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è
await manualDeploymentNotification('v1.2.3', 'production')
```

### Webhook –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:

```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook –≤ Railway
curl -X POST "https://your-app.railway.app/webhook/railway/deployment" \
  -H "Content-Type: application/json" \
  -d '{"status":"SUCCESS","deploymentId":"abc123","service":"ai-server"}'
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏:

```sql
-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ —Å—É—Ç–∫–∏
SELECT
  endpoint,
  COUNT(*) as total_checks,
  COUNT(CASE WHEN status = 'success' THEN 1 END) as successful,
  AVG(response_time) as avg_response_time
FROM network_check_history
WHERE checked_at >= NOW() - INTERVAL '1 day'
GROUP BY endpoint;

-- –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã
SELECT
  DATE_TRUNC('hour', checked_at) as hour,
  COUNT(CASE WHEN status != 'success' THEN 1 END) as failures
FROM network_check_history
WHERE checked_at >= NOW() - INTERVAL '7 days'
GROUP BY hour
HAVING COUNT(CASE WHEN status != 'success' THEN 1 END) > 0
ORDER BY hour DESC;
```

### Inngest Dashboard:

- **–§—É–Ω–∫—Ü–∏–∏**: –í—Å–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- **–°–æ–±—ã—Ç–∏—è**: –ò—Å—Ç–æ—Ä–∏—è –∑–∞–ø—É—Å–∫–æ–≤ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- **–õ–æ–≥–∏**: –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –∫–∞–∂–¥–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- **–û—à–∏–±–∫–∏**: –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –æ—à–∏–±–æ–∫ –∏ –ø–æ–≤—Ç–æ—Ä—ã

## üõ† –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤:

```typescript
// –í networkCheckMonitor.ts
const CRITICAL_ENDPOINTS = [
  { url: `${process.env.APP_URL}`, name: 'Main API' },
  { url: `${process.env.APP_URL}/health`, name: 'Health Check' },
  { url: `${process.env.APP_URL}/api/user/balance`, name: 'User Balance API' },
  // –î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–π —ç–Ω–¥–ø–æ–∏–Ω—Ç
  {
    url: `${process.env.APP_URL}/api/custom/endpoint`,
    name: 'Custom Endpoint',
  },
]
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è:

```typescript
// –ò–∑–º–µ–Ω–∏—Ç—å —á–∞—Å—Ç–æ—Ç—É –ø—Ä–æ–≤–µ—Ä–æ–∫
{ cron: '*/5 * * * *' }, // –ö–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç –≤–º–µ—Å—Ç–æ 10

// –ò–∑–º–µ–Ω–∏—Ç—å —á–∞—Å—Ç–æ—Ç—É –∞–≤—Ç–æ–¥–µ—Ç–µ–∫—Ü–∏–∏
{ cron: '*/10 * * * *' }, // –ö–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç –≤–º–µ—Å—Ç–æ 5
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:

```typescript
// –í deploymentMonitor.ts - –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä–æ–≥ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
if (failureRate > 30) {
  // –í–º–µ—Å—Ç–æ 50%
  await triggerRecoveryIfNeeded(version, failureRate, criticalEndpoints)
}
```

## üìã Troubleshooting

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

#### 1. **–§—É–Ω–∫—Ü–∏–∏ –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è**

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –≤ index.ts
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Inngest Dev Server
npx inngest-cli@latest dev --port 8288
```

#### 2. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç**

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
echo $ADMIN_CHAT_ID
echo $ADMIN_TELEGRAM_ID

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
curl "https://api.telegram.org/bot$BOT_TOKEN/getMe"
```

#### 3. **–û—à–∏–±–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**

```sql
-- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
SELECT NOW();

-- –°–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É –≤—Ä—É—á–Ω—É—é –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
CREATE TABLE IF NOT EXISTS network_check_history (...);
```

#### 4. **–¢–∞–π–º–∞—É—Ç—ã —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤**

```typescript
// –£–≤–µ–ª–∏—á—å—Ç–µ —Ç–∞–π–º–∞—É—Ç –≤ networkCheckMonitor.ts
const timeoutId = setTimeout(() => controller.abort(), 30000) // 30 —Å–µ–∫
```

### –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞:

```bash
# –õ–æ–≥–∏ Inngest
tail -f /tmp/logs/inngest.log

# –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
tail -f /tmp/logs/combined.log

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Ñ—É–Ω–∫—Ü–∏–π
curl http://localhost:8288/v0/functions
```

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### –î–ª—è production:

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ proper alerting** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ Slack/Email
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Redis** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤–µ—Ä—Å–∏–π
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Railway API —Ç–æ–∫–µ–Ω** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
4. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ performance** - –¥–æ–±–∞–≤—å—Ç–µ –º–µ—Ç—Ä–∏–∫–∏ –≤ Grafana
5. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ—á–∏—â–∞–π—Ç–µ** —Ç–∞–±–ª–∏—Ü—É `network_check_history`

### –î–ª—è development:

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ staging endpoints** –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
2. **–û—Ç–∫–ª—é—á–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ**
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π Telegram chat** –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
4. **–ó–∞–ø—É—Å–∫–∞–π—Ç–µ —Ç–µ—Å—Ç—ã** –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º —Ä–µ–ª–∏–∑–æ–º

### Best Practices:

1. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ —Ç—Ä–µ–Ω–¥—ã**, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —Å–±–æ–∏
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–∞–∑–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏** –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
3. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è** –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
4. **–†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ** —Ä–∞–±–æ—Ç—É —Å–∏—Å—Ç–µ–º—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
5. **–ò–º–µ–π—Ç–µ –ø–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞** –Ω–∞ —Å–ª—É—á–∞–π –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º

---

## üí° –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ Network Check Monitoring –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

‚úÖ **–ü—Ä–æ–∞–∫—Ç–∏–≤–Ω–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ** –ø—Ä–æ–±–ª–µ–º –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ** –∫–æ–º–∞–Ω–¥—ã —á–µ—Ä–µ–∑ Telegram  
‚úÖ **–î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞** –∏ –∏—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–≤–µ—Ä–æ–∫  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ** –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å–±–æ—è—Ö  
‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Railway** –∏ –¥—Ä—É–≥–∏–º–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º–∏  
‚úÖ **–ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞** –ø–æ–¥ –Ω—É–∂–¥—ã –ø—Ä–æ–µ–∫—Ç–∞

–¢–µ–ø–µ—Ä—å –≤—ã –±–æ–ª—å—à–µ –Ω–µ –±—É–¥–µ—Ç–µ —Ç–µ—Ä—è—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑-–∑–∞ network check –æ—à–∏–±–æ–∫! üéâ
