# üé¨ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–∏–¥–µ–æ

## üîç –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç:

```
‚úÖ Inngest v3 client created: true
üö¶ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Inngest –º–∞—Ä—à—Ä—É—Ç–æ–≤ (v3). –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ —Ñ—É–Ω–∫—Ü–∏–π: 36
üîç –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ Inngest —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (v3):
```

–ù–æ –≤–∏–¥–µ–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö API –∫–ª—é—á–µ–π –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

## üõ†Ô∏è –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. **–°–æ–∑–¥–∞–Ω –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç**

```bash
npm run diagnose
```

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç:

- ‚úÖ KIE_AI_API_KEY (—ç–∫–æ–Ω–æ–º–∏—è –¥–æ 87%)
- ‚úÖ Google Cloud –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (Vertex AI fallback)
- ‚úÖ Supabase –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- ‚úÖ –°—Ç–∞—Ç—É—Å API —Å–µ—Ä–≤–∏—Å–æ–≤

### 2. **–£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ generateVeo3Video.ts**

#### –î–æ–±–∞–≤–ª–µ–Ω–æ:

- **–ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –æ—à–∏–±–æ–∫** - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –ø—Ä–æ–±–ª–µ–º—ã
- **–ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º** - –Ω–∞ —Ä—É—Å—Å–∫–æ–º/–∞–Ω–≥–ª–∏–π—Å–∫–æ–º
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–æ–≤** - –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
- **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤–∫–ª—é—á–∞—è HTTP —Å—Ç–∞—Ç—É—Å—ã
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ fallback** - –∫–æ–≥–¥–∞ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ Vertex AI

#### –¢–∏–ø—ã –æ—à–∏–±–æ–∫:

- `authentication` - –ø—Ä–æ–±–ª–µ–º—ã —Å API –∫–ª—é—á–∞–º–∏
- `insufficient_credits` - –Ω–µ—Ö–≤–∞—Ç–∫–∞ —Å—Ä–µ–¥—Å—Ç–≤
- `rate_limit` - –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤
- `user_not_found` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω
- `service_unavailable` - —Å–µ—Ä–≤–∏—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- `timeout` - –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ–∂–∏–¥–∞–Ω–∏—è

### 3. **–î–æ–±–∞–≤–ª–µ–Ω—ã graceful fallback —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**

–ö–æ–≥–¥–∞ Kie.ai –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç:

```
‚ö†Ô∏è –û—Å–Ω–æ–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞. –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—É—é (–º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω–µ–µ)...
```

## üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã

```bash
npm run diagnose
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

- ‚ùå KIE_AI_API_KEY - –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (—ç–∫–æ–Ω–æ–º–∏—è 87% –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞)
- ‚ùå GOOGLE_CLOUD_PROJECT - –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚ùå SUPABASE_URL - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–µ–Ω, –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- ‚ùå SUPABASE_ANON_KEY - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–µ–Ω, –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

## üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Supabase:

- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–∏–¥–µ–æ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–ª—É—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –≤–∏–¥–µ–æ:

- Kie.ai –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω ‚Üí –Ω–µ—Ç –¥–µ—à–µ–≤–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- Vertex AI –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω ‚Üí –Ω–µ—Ç fallback
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∏–¥–µ–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞**

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é

### 1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è**

–î–æ–±–∞–≤–∏—Ç—å –≤ Railway/production:

```env
# Supabase (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ)
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key

# Kie.ai (—ç–∫–æ–Ω–æ–º–∏—è –¥–æ 87%)
KIE_AI_API_KEY=your-kie-api-key

# Google Cloud (fallback)
GOOGLE_CLOUD_PROJECT=your-project-id
GOOGLE_APPLICATION_CREDENTIALS=/path/to/credentials.json
```

### 2. **–ê–∫—Ç–∏–≤–∞—Ü–∏—è —ç–∫–æ–Ω–æ–º–∏–∏ —á–µ—Ä–µ–∑ Kie.ai**

1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ https://kie.ai
2. –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–∞ –≤ Settings ‚Üí API Keys
3. –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ (–º–∏–Ω–∏–º—É–º $5-10)
4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ `KIE_AI_API_KEY` –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

### 3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Vertex AI –∫–∞–∫ fallback**

1. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –≤ Google Cloud Console
2. –í–∫–ª—é—á–µ–Ω–∏–µ Vertex AI API
3. –°–æ–∑–¥–∞–Ω–∏–µ Service Account –∏ –∫–ª—é—á–∞
4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:

- ‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ Kie.ai** (87% —ç–∫–æ–Ω–æ–º–∏–∏)
- ‚úÖ **–ù–∞–¥–µ–∂–Ω—ã–π fallback —á–µ—Ä–µ–∑ Vertex AI**
- ‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö**
- ‚úÖ **–ü–æ–Ω—è—Ç–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º**
- ‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—à–∏–±–æ–∫ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤**

## üîß –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

```bash
# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º
npm run diagnose

# –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö
npm run logs:errors

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ API –∑–∞–ø—Ä–æ—Å–æ–≤
npm run logs:api
```

---

**–ò—Ç–æ–≥:** –°–æ–∑–¥–∞–Ω—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ —É–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫. –î–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ production —Å—Ä–µ–¥–µ.
